!function(a,b,c){function d(){try{return"localStorage"in b&&null!==b.localStorage}catch(a){return!1}}function e(a){return"/"===a[0]?a.substr(1):a}function f(b){XenForo.LivePages.navigationCache[b]=a("#messageList").html(),XenForo.LivePages.pageNavCache[b]=a(".pageNavLinkGroup").html()}function g(){var a=e(b.location.pathname);f(a)}function h(c){var d=a(b).scrollTop()+a("#header").height(),e=d+a(b).height(),f=a(c).offset().top,g=f+a(c).height();return g<=e&&f>=d}function i(b){a("<link />").attr("rel","next").attr("href",b).appendTo(c.head)}function j(b){var c=a("link[rel=\"next\"]");c.length?c.attr("href",b):i(b)}function k(){a("link[rel=\"next\"]").remove()}function l(){return a("link[rel=\"next\"]").attr("href")}XenForo.LivePages={},XenForo.LivePages.navigationCache={},XenForo.LivePages.pageNavCache={};var m=function(){this;b.onpopstate=function(b){if(b.state&&b.state.page&&XenForo.LivePages.navigationCache[b.state.page]&&0<XenForo.LivePages.navigationCache[b.state.page].length){var c=a("#messageList");c.html(XenForo.LivePages.navigationCache[b.state.page]).xfShow(),c.children("li").css("opacity",1),a(".pageNavLinkGroup").html(XenForo.LivePages.pageNavCache[b.state.page]).xfActivate()}}};a(function(){history.pushState&&m()}),XenForo.LivePageLoading=function(a){this.__construct(a)},XenForo.LivePageLoading.prototype={__construct:function(b){this.$pageNav=b,this.parentClass=".pageNavLinkGroup",this.$mask=a("#LivePageLoadingMask"),this.timer=void 0,this.href=void 0,this.setPaginationHandler()},setPageUrl:function(a){history.pushState({page:a,type:"page"},c.title,a)},scroll:function(){h(a(this.parentClass))?this.$pageNav.hasClass("fixed")&&this.$pageNav.removeClass("fixed"):!this.$pageNav.hasClass("fixed")&&this.$pageNav.addClass("fixed")},setPageNavWidth:function(){this.$pageNav.css({width:this.$pageNav.children().width()})},setPaginationHandler:function(c){var d=this;this.$pageNav.find("a[href]:not(.currentPage)").on("click",function(b){b.preventDefault(),g(),d.showMask(),d.href=a(this).attr("href"),XenForo.ajax(d.href,{},a.context(d,"changePage"))}),this.setPageNavWidth(),c,a(b).on("load scroll",a.context(this,"scroll")),this.scroll()},showMask:function(){animateCSS(this.$mask.get(0),["animated","fadeIn","fast"]),this.$mask.addClass("visible")},hideMask:function(){animateCSS(a("#messageList").get(0),["animated","fadeIn","faster"]),animateCSS(this.$mask.get(0),["animated","fadeOut","fast"]),this.$mask.removeClass("visible")},changePage:function(c){if(!XenForo.hasResponseError(c)){var d=a("#messageList");if(XenForo.isTouchBrowser()?a("html, body").animate({scrollTop:0}):a(b).scrollTop()>this.$pageNav.offset().top&&a("html, body").animate({scrollTop:this.$pageNav.offset().top}),d.html(""),this.hideMask(),a(c.templateHtml).xfInsert("appendTo",d,"xfFadeIn",50),this.setPageUrl(this.href),this.$mask=a("#LivePageLoadingMask"),c.nextPageHref){j(c.nextPageHref);var e=XenForo.create("XenForo.InfinitiveThreadPosts","#messageList");e.bindWindowScrollEvent()}else k();this.replacePageNav(c.pageNav);var f=XenForo.create("XenForo.FloatingRedactor",".FloatingRedactor");void 0!==f&&f.pageScroll();var g=a("#messageList").find(".DateTime").last().data("time");a("input[name=\"last_date\"]").val(g).attr("data-load-value",""),a("input[name=\"last_known_date\"]").val(g)}},replacePageNav:function(b){this.$pageNav=a(b).replaceAll(this.$pageNav),this.setPaginationHandler(!0)}},XenForo.InfinitiveThreadPosts=function(a){this.__construct(a)},XenForo.InfinitiveThreadPosts.prototype={__construct:function(a){this.$destination=a,this.inProgress=!1,this.nextPage=l(),this.bindWindowScrollEvent()},bindWindowScrollEvent:function(){},pageScroll:function(){20<=this.$destination.children().length&&(h(this.$destination.find(".message:eq(-5)"))||h(this.$destination.find(".message:last")))&&!this.inProgress&&(this.inProgress=!0,this.loadNextPage())},loadNextPage:function(){var b=l();b&&XenForo.ajax(l(),{_next_page_loading:!0},a.context(this,"nextPageLoadingCallback"),{global:!1})},replacePageNav:function(b){a(b).replaceAll(".PageNav"),a(".PageNav").parent().xfActivate()},insertContent:function(b){a(b.templateHtml).xfInsert("appendTo",this.$destination,"fadeIn",50,function(){this.inProgress=!1}.bind(this))},nextPageLoadingCallback:function(c,d){XenForo.hasResponseError(c,d)||(this.insertContent(c),c.pageNav&&this.replacePageNav(c.pageNav),c.nextPageHref?(j(c.nextPageHref),!this.nextPage&&a(b).on("load scroll",a.context(this,"pageScroll")),this.nextPage=c.nextPageHref):k(),a("input[name=\"last_date\"]").val(c.lastDate))}},XenForo.FloatingRedactor=function(a){this.__construct(a)},XenForo.FloatingRedactor.prototype={__construct:function(c){this.$form=c,this.$helper=a(".FloatingRedactorHelper"),this.setFormWidth(),XenForo.isTouchBrowser()||a(b).on("load scroll",a.context(this,"pageScroll"))},setFormWidth:function(){this.$form.width(a("#messageList").width())},pageScroll:function(){this.$form.height()<a(b).height()/3&&(h(this.$helper)?this.$form.hasClass("fixed")&&this.$form.removeClass("fixed"):!this.$form.hasClass("fixed")&&this.$form.addClass("fixed"))}},XenForo.hiddenReply=function(b){b.on("click",function(d){d.preventDefault();var e=a("#QuickReply");e.data("QuickReply").scrollAndFocus();var f=XenForo.getEditorInForm(e);if(!f)return!1;var g="[USERS="+b.data("username")+"]@"+b.data("username")+", <span></span>[/USERS]";f.$editor?(f.insertHtml(g),f.$editor.data("xenForoElastic")&&f.$editor.data("xenForoElastic")()):f.val(f.val()+g);var h=f.getSelectedNode().childNodes[0].length,i=c.createRange(),j=f.window.getSelection();return i.setStart(f.getSelectedNode().childNodes[0],h),i.collapse(!0),j.removeAllRanges(),j.addRange(i),!1})},XenForo.ForumSearchThreadsButton=function(b){var c=a(b.attr("rel")),d=null;b.live("mouseenter",function(){d&&clearTimeout(d),c.hasClass("active")||(c.addClass("active"),b.addClass("active"))}).live("mouseleave",function(){c.hasClass("active")&&!c.hasClass("pinned")&&(d&&clearTimeout(d),d=setTimeout(function(){c.removeClass("active"),b.removeClass("active")},1e3))})},XenForo.ForumSearchThreadsPinButton=function(b){var c=a(b.parent().attr("rel"));d()||b.remove(),localStorage.getItem("ForumSearchThreadsPinned")&&(c.addClass("pinned"),b.addClass("pinned")),b.on("click",function(){b.hasClass("pinned")?(localStorage.removeItem("ForumSearchThreadsPinned"),b.removeClass("pinned"),c.removeClass("pinned")):(localStorage.setItem("ForumSearchThreadsPinned","1"),b.addClass("pinned"),c.addClass("pinned"))})},XenForo.ForumSearchThreadsMenu=function(a){var b=a.find(".current").index(),c=a.find(".scrollBar");if(4<=b){var d=a.find(".discussionList").children().outerHeight();c.scrollTop(d*(b-4))}c.addClass("scrollbar-macosx scrollbar-dynamic").scrollbar()},XenForo.PostCommentButton=function(b){b.on("click",function(){var c,d=b.closest("li"),f=a("#"+d.attr("id")),g=d.find(".username").wrapInner("<span class=\"username\"></span>").html(),i=d.find(".hashPermalink").attr("href"),j=a("#QuickReply"),k=j.find(".MessageReplyBox");c=d.hasClass("message")?d:d.closest("li.message"),j.data("commentingMessage",c);const l=c.attr("id").split("-")[1];j.attr("action",`posts/${l}/comment`),k.find(".Content").html(k.find(".Content").data("content").replace("{{username}}",g)).attr("href",i).unbind("click").on("click",function(b){b.preventDefault(),h(f)||a("html, body").animate({scrollTop:f.offset().top-44},0),XenForo.animateBackgroundColor(f)}),k.show(),k.find(".Cancel").on("click",function(){k.hide(),j.data("commentingMessage",""),j.attr("action",j.data("def-action"))})})},XenForo.animateBackgroundColor=function(a){const b=a.css("background-color");a.animate({backgroundColor:"rgb(45,45,45)"},300,function(){setTimeout(()=>{a.animate({backgroundColor:b},300)},2e3)})},XenForo.CommentQuickReply=function(c){c.on("AutoValidationComplete",function(d){if(c.data("commentingMessage")){var e,f=c.data("commentingMessage"),g=f.find(".CommentPostList");a(d.ajaxData.comment).xfInsert("appendTo",f.find(".CommentPostList"),"xfFadeIn"),e=g.children().last().offset().top<a(b).height()+f.offset().top?f:g.children().last(),c.find(".MessageReplyBox .Cancel").trigger("click"),h(e)||a("html, body").animate({scrollTop:e.offset().top-44},0),XenForo.animateBackgroundColor(g.children().last())}})},XenForo.CommentLoader=function(a){this.__construct(a)},XenForo.CommentLoader.prototype={__construct:function(b){this.$link=b,b.click(a.context(this,"click"))},click:function(b){var c=this.$link.data("loadparams");"object"!=typeof c&&(c={}),b.preventDefault(),XenForo.ajax(this.$link.attr("href"),c,a.context(this,"loadSuccess"),{type:"GET"})},loadSuccess:function(b){var c,d,e=this.$link.data("replace");return!XenForo.hasResponseError(b)&&void(c=e?a(e):this.$link.parent(),b.comments&&b.comments.length?new XenForo.ExtLoader(b,function(){for(d=0;d<b.comments.length;d++)a(b.comments[d]).xfInsert("insertBefore",c);c.xfHide()}):c.xfRemove())}},XenForo.register("._hiddenReplyButton","XenForo.hiddenReply"),XenForo.register("#messageList","XenForo.InfinitiveThreadPosts"),XenForo.register(".PageNav","XenForo.LivePageLoading"),XenForo.register(".FloatingRedactor","XenForo.FloatingRedactor"),XenForo.register("._forumSearchThreadsMenu","XenForo.ForumSearchThreadsMenu"),XenForo.register("._forumSearchThreadsButton","XenForo.ForumSearchThreadsButton"),XenForo.register("._forumSearchThreads--pinButton","XenForo.ForumSearchThreadsPinButton"),XenForo.register(".PostCommentButton","XenForo.PostCommentButton"),XenForo.register("#QuickReply","XenForo.CommentQuickReply"),XenForo.register("a.CommentLoader","XenForo.CommentLoader")}(jQuery,this,document);