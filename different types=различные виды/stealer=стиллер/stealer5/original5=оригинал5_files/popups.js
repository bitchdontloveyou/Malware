/*! For license information please see popups.793468bb5d6f646e1873.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{615:function(t,e,i){},616:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"checkbox",class:{m_disabled:t.disabled}},[i("div",{staticClass:"checkbox__field"},[i("input",{ref:"input",staticClass:"checkbox__field_input",attrs:{type:"checkbox",name:t.name,disabled:t.disabled},domProps:{checked:t.checked},on:{change:t.change}}),i("div",{staticClass:"checkbox__field_box"})]),t.label?i("div",{staticClass:"checkbox__label",domProps:{innerHTML:t._s(t.label)}}):t._e()])};s._withStripped=!0;var n={props:["name","label","checked","disabled"],data:function(){return{current_checked:null}},computed:{current:function(){return null!=this.current_checked?this.current_checked:this.checked}},methods:{change:function(){var t;return this.current_checked=this.$refs.input.checked,t=this.current_checked,this.$emit("change",t,this.name)}},watch:{value:function(){return this.current_checked=null}}},o=(i(622),i(0)),r=Object(o.a)(n,s,[],!1,null,"4a737bfe",null);r.options.__file="src/components/ui/checkbox.vue";e.a=r.exports},617:function(t,e,i){},618:function(t,e,i){},619:function(t,e,i){"use strict";(function(t){var s=i(45),n=i(202),o=i(708),r=i(709),a=i(704),c=i(705),l=i(710),u=i(706),d=i(703),_=i(707),h=i(39),p=i.n(h),m=i(4),g=i.n(m);e.a={components:{Icon:s.a,Userpic:n.a,SettingsMenu:o.a,SettingsSwitcher:r.a,"settings-main":a.a,"settings-teammates":c.a,"settings-domain":l.a,"settings-topics":u.a,"settings-imports":d.a,"settings-account":_.a},data:function(){return{sections:["main","teammates","domain","topics","imports","account"],switcher:!0,blogs_dropdown:!1,loading:!1}},computed:{links:function(){return this.$store.state.config.app.links},account:function(){return this.$store.state.account},blogs:function(){return this.account.blogs},profile:function(){return this.$store.getters["account/profile"]},params:function(){return this.$store.state.blogs.settings},open:function(){return this.params.open},blogID:function(){return this.params.blog_id||this.profile.id},section:function(){return this.params.section||"main"||p()(this.sections)},currentBlog:function(){return this.blogID?g()(this.account.blogs,{id:this.blogID}):null}},watch:{blogID:function(){return this.blogID&&this.open?this.fetch():this.close()},open:function(){if(this.open&&this.fetch(),this.open&&this.params.section)return this.switcher=!1},profile:function(){if(!this.profile.id)return this.close()},currentBlog:function(){if(!this.currentBlog&&this.profile.id)return this.$store.commit("blogs/setSettings",{blog_id:this.profile.id})}},methods:{fetch:function(){if(this.blogID)return this.loading=!0,this.$store.dispatch("blogs/byId",{id:this.blogID}).then(()=>this.loading=!1,()=>this.loading=!1)},logout:function(){return this.$store.dispatch("account/logout"),this.trackEvent(["settings","sign_out"])},close:function(){return this.$store.dispatch("blogs/closeSettings"),this.switcher=!0},switchBlog:function(t){return this.$store.commit("blogs/setSettings",{blog_id:t})},openNewBlog:function(){return this.$store.commit("blogs/newBlogShow",!0)},changeSection:function(t){return this.$store.commit("blogs/setSettings",{section:t}),this.closeSwitcher()},closeSwitcher:function(){return t(()=>this.switcher=!1)},trackClick:function(t){return this.trackEvent(["settings","click_"+t])}}}}).call(this,i(20).setImmediate)},620:function(t,e,i){},621:function(t,e,i){},622:function(t,e,i){"use strict";var s=i(615);i.n(s).a},623:function(t,e,i){var s=i(203),n=i(77),o=i(31),r=i(25),a=i(624);t.exports=function(t){if(null==t)return 0;if(o(t))return r(t)?a(t):t.length;var e=n(t);return"[object Map]"==e||"[object Set]"==e?t.size:s(t).length}},624:function(t,e,i){var s=i(625),n=i(206),o=i(626);t.exports=function(t){return n(t)?o(t):s(t)}},625:function(t,e,i){var s=i(395)("length");t.exports=s},626:function(t,e){var i="[\\ud800-\\udfff]",s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+s+"|"+n+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,r,a].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+s+"?",s,r,a,i].join("|")+")",d=RegExp(n+"(?="+n+")|"+u+l,"g");t.exports=function(t){for(var e=d.lastIndex=0;d.test(t);)++e;return e}},627:function(t,e,i){},628:function(t,e,i){},629:function(t,e,i){"use strict";(function(t){var s=i(45),n=i(202),o=i(89),r=i(3),a=i.n(r),c=i(13),l=i.n(c),u=i(56),d=i.n(u),_=(i(30),i(4),i(68)),h=i.n(_),p=(i(35),i(91)),m=i.n(p);e.a={components:{Icon:s.a,Userpic:n.a,Dropdown:o.a},props:["name","type","placeholder","icon","value","queryValue","action","getter","params","queryParams","changesMode","loading"],data:function(){return{focus:!1,querying:!1,query:"",val:null,selected:0}},computed:{suggests:function(){return this.$store.getters[this.getter]},isLoading:function(){return this.querying||this.loading},openSuggests:function(){return this.focus&&!this.loading&&this.suggests&&this.suggests.length>0},queryWidth:function(){return.75*((this.query||"").length+1)+"em"},pr:function(){return a()({value:"id",label:"label"},this.params)}},filters:{unescape:function(t){return m()(t)}},mounted:function(){return this.queryDebounced=d()(()=>this.fetch(),400)},watch:{value:{handler:"selectValue",immediate:!0},queryValue:function(){return this.query=this.queryValue},loading:function(){if(!this.loading)return this.$refs.query.blur(),this.onBlur()}},methods:{fetch:function(){return this.querying=!0,this.$store.dispatch(this.action,a()(this.queryParams||{},{query:this.query})).then(()=>this.querying=!1,()=>this.querying=!1)},setFocus:function(){return this.$refs.query.focus(),this.onFocus()},selectDown:function(){return l()(this.suggests)?this.selectValue():this.suggests[this.selected+1]?this.selected++:void 0},selectUp:function(){return l()(this.suggests)?this.selectValue():this.suggests[this.selected-1]?this.selected--:void 0},selectValue:function(){var t,e;return e=null,t=0,this.value&&!l()(this.suggests)&&(t=h()(this.suggests,[this.pr.value,this.value]),e=this.suggests[t]),t<0&&(t=0),this.select=t,this.value?this.val=e?e[this.pr.label]:null:this.val=null},change:function(t){var e,i,s;if(!l()(this.suggests))return null==t&&(t=this.selected),!!(e=this.suggests[t])&&(s=e[this.pr.value],i=m()(e[this.pr.label]),"enter"===this.changesMode?(this.$refs.query.value=i,this.query=i,this.$refs.query.focus(),this.onFocus(),this.queryDebounced(),this.$emit("enter",i)):(this.$refs.query.value="",this.query="",this.$refs.query.blur(),this.onBlur(),null!=i&&this.$emit("input",i),null!=s?this.$emit("change",s):void 0))},onBeforeInput:function(e){var i;if(i=e.which||e.keyCode,!e.metaKey&&!e.ctrlKey)return this.value&&e.preventDefault(),8===i&&this.value?(this.$emit("change",null),t(()=>(this.$refs.query.focus(),this.onFocus()))):void 0},onInput:function(){return this.query=this.$refs.query.value.trim(),this.$emit("input",this.query||null),this.onFocus(),this.queryDebounced()},onFocus:function(){return t(()=>(this.focus=!0,this.selectValue()))},onBlur:function(e){if(!this.openSuggests||e)return t(()=>this.focus=!1)},onKeybind:function(t){var e;switch(e=!1,t.which||t.keyCode){case 13:e=!0,this.change();break;case 40:e=!0,this.selectDown();break;case 38:e=!0,this.selectUp()}if(e)return t.preventDefault()}}}}).call(this,i(20).setImmediate)},630:function(t,e,i){},631:function(t,e,i){},632:function(t,e,i){"use strict";(function(t){var s=i(16),n=i(62),o=i(56),r=i.n(o),a=i(91),c=i.n(a);e.a={components:{Button:s.a,Input:n.a},props:["topic","editing","blog"],data:function(){return{saveing:!1,deleteing:!1,uri:null,description:null,uriChecker:null}},computed:{config:function(){return this.$store.state.config.app},invalidFields:function(){var t,e,i;return i=/^[a-z0-9]{1}[a-z0-9.\-_\+]{1,98}[a-z0-9]{1}$/i,e=/^topic\d+/,t=[],this.description&&this.description.length>500&&t.push("description"),this.uri&&i.test(this.uri)?e.test(this.uri)&&t.push("uri"):t.push("uri"),t},changed:function(){return{uri:(this.uri||"").toLowerCase()!==this.topic.uri,description:this.description!==this.topic.description}},valid:function(){return 0===this.invalidFields.length&&(!this.changed.uri||!0===this.uriChecker)},uriStatus:function(){return this.changed.uri?!0===this.uriChecker?"success":this.invalidFields.indexOf("uri")>-1||!1===this.uriChecker?"error":"loading"===this.uriChecker?"preloader":null:"success"},blogUrl:function(){return this.blog.domain?this.blog.domain:`${this.config.url.site.replace(/^\w+:\/\//,"")}/@${this.blog.uri}`},checkUriDebounced:function(){return r()(()=>this.checkUri(),500,{trailing:!0})}},filters:{unescape:function(t){return c()(t)}},watch:{topic:{immediate:!0,deep:!0,handler:function(){return this.uri=this.topic.uri,this.description=this.topic.description}},uri:function(){return this.checkUriDebounced()}},methods:{checkUri:function(){var t,e;return this.changed.uri?!(this.invalidFields.indexOf("uri")>-1)&&(this.uriChecker="loading",t=this.blog.id,e=this.uri,this.$store.dispatch("blogs/checkTopicUri",{blog_id:t,uri:e}).then(t=>this.uriChecker=t).catch((function(){return this.uriChecker=null}))):this.uriChecker=!0},toggleEditing:function(e){return t(()=>this.$emit("editing",e))},editTopic:function(){var t,e,i;if(!this.deleteing&&this.valid)return this.saveing=!0,t=this.blog.id,i=this.topic.id,e={uri:this.uri,description:this.description},this.$store.dispatch("blogs/editTopic",{blog_id:t,id:i,data:e}).then(()=>(this.saveing=!1,this.$emit("editing",!1)),()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.saveing=!1))},removeTopic:function(t){var e,i;if(!this.deleteing)return this.deleteing=!0,e=this.blog.id,t=this.topic.id,i=this.topic.name,this.$store.dispatch("confirms/add",{message:this.$t("confirms.remove_topic",{topic:i}),type:"delete"}).then(()=>this.$store.dispatch("blogs/removeTopic",{blog_id:e,id:t}),(function(){})).then(()=>this.deleteing=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.deleteing=!1))}}}}).call(this,i(20).setImmediate)},633:function(t,e,i){},634:function(t,e,i){},635:function(t,e,i){},636:function(t,e,i){var s=i(637),n=i(638),o=i(24),r=i(5),a=i(78);t.exports=function(t,e,i){var c=r(t)?s:n;return i&&a(t,e,i)&&(e=void 0),c(t,o(e,3))}},637:function(t,e){t.exports=function(t,e){for(var i=-1,s=null==t?0:t.length;++i<s;)if(!e(t[i],i,t))return!1;return!0}},638:function(t,e,i){var s=i(63);t.exports=function(t,e){var i=!0;return s(t,(function(t,s,n){return i=!!e(t,s,n)})),i}},639:function(t,e,i){},640:function(t,e,i){"use strict";(function(t){var s=i(201),n=i(12),o=i(16),r=i(62),a=i(2),c=i.n(a),l=i(11),u=i.n(l);e.a={components:{Modal:s.a,IconButton:n.a,Button:o.a,Input:r.a},props:["show"],data:function(){return{submiting:!1,fields:{old_password:null,password:null,confirm_password:null}}},computed:{isValid:function(){var t,e,i;return({old_password:e,password:i,confirm_password:t}=this.fields),!(!e||!e.length>=5)&&(!(!i||!i.length>=5)&&i===t)},hasChanges:function(){return!!(this.fields.old_password||this.fields.password||this.fields.confirm_password)}},watch:{show:function(){if(this.show)return t(()=>this.$refs.old_password.focus())}},methods:{submit:function(t){var e,i;if(t.preventDefault(),this.isValid&&!this.submiting)return({old_password:e,password:i}=this.fields),this.submiting=!0,Promise.resolve().then(()=>this.$store.dispatch("auth/ids")).then(()=>this.$store.dispatch("api/put",{method:"account/password",data:this.fields})).then(()=>(this.submiting=!1,this.close())).catch(t=>{var e;return this.submiting=!1,"bad_request"===(null!=t&&null!=(e=t.data)?e.error:void 0)?this.$store.dispatch("alerts/add",{type:"error",show:"topic",topic:"password_error",locale:"settings.password.error"}):this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})})},close:function(){return this.$emit("close")},reset:function(){return c()(u()(this.fields),t=>(this.fields[t]=null,!0))}}}}).call(this,i(20).setImmediate)},641:function(t,e,i){},642:function(t,e){t.exports=function(t){for(var e=-1,i=null==t?0:t.length,s=0,n=[];++e<i;){var o=t[e];o&&(n[s++]=o)}return n}},643:function(t,e,i){},644:function(t,e,i){},645:function(t,e,i){},646:function(t,e,i){"use strict";(function(t){var s=i(201),n=i(12),o=i(16),r=i(62);i(11);e.a={components:{Modal:s.a,IconButton:n.a,Button:o.a,Input:r.a},data:function(){return{loading:!1,error:null,uri:!1}},computed:{account:function(){return this.$store.state.account},serviceLink:function(){return this.$store.state.config.app.url.site.replace(/^https?:\/\//i,"")+"/@"},show:function(){var t;return this.$store.state.blogs.new_blog_show&&(null!=(t=this.account)?t.can_create_blog:void 0)},isValid:function(){return/^[a-z0-9]{1}[a-z0-9.\-_\+]{1,30}[a-z0-9]{1}$/i.test(this.uri||"")}},watch:{uri:function(){return this.error=null},show:function(){if(this.show)return t(()=>this.$refs.uri.focus())}},methods:{submit:function(t){var e,i;if(t.preventDefault(),this.isValid&&!this.loading)return this.loading=!0,i=this.uri,e=()=>this.$store.dispatch("api/post",{method:"blogs",data:{uri:i}}).then(()=>this.$store.dispatch("account/fetch")).then((function(){return!0})),this.$store.dispatch("api/get",{method:"account/uri/"+i}).then(({free:t})=>t?e():(this.error=this.$t("popups.new_blog.error"),!1)).then(t=>{if(this.loading=!1,t)return this.close()}).catch(t=>(this.loading=!1,this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})))},close:function(){return this.$store.commit("blogs/newBlogShow",!1)}}}}).call(this,i(20).setImmediate)},647:function(t,e,i){},648:function(t,e,i){},649:function(t,e,i){},650:function(t,e,i){},651:function(t,e,i){},666:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"suggestedInput",class:{m_focus:t.focus}},[i("div",{staticClass:"suggestedInput__input",on:{click:t.setFocus}},[t.icon||t.$slots.icon?i("div",{staticClass:"suggestedInput__icon"},[t._t("icon",[i("Icon",{attrs:{name:t.icon}})])],2):t._e(),t.val?i("div",{staticClass:"suggestedInput__input_value"},[t._v(t._s(t.val))]):t._e(),i("input",{ref:"query",staticClass:"suggestedInput__input_query",style:{width:t.queryWidth},attrs:{maxlength:"50"},domProps:{value:t.query},on:{focus:t.onFocus,blur:function(e){return t.onBlur()},input:t.onInput,keydown:t.onBeforeInput,keyup:t.onKeybind}}),t.value||t.query||!t.placeholder?t._e():i("div",{staticClass:"suggestedInput__input_placeholder",domProps:{textContent:t._s(t.placeholder)}})]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.isLoading?i("div",{staticClass:"suggestedInput__loading"},[i("Icon",{attrs:{name:"preloader_small"}})],1):t._e()]),i("Dropdown",{attrs:{open:t.openSuggests,anchor:t.$el,width:"anchor",mode:"blog"===t.type?"user":null},on:{close:function(e){return t.onBlur(!0)}}},t._l(t.suggests,(function(e,s){return i("div",{key:e[t.pr.value],staticClass:"dropdown__item",class:{m_focus:s===t.selected},on:{mouseover:function(e){t.selected=s},click:function(e){return e.stopPropagation(),e.preventDefault(),t.change(s)}}},["blog"===t.type?i("div",{staticClass:"dropdown__item_userpic"},[i("Userpic",{attrs:{blog:e}})],1):t._e(),"blog"===t.type?i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[i("span",[t._v(t._s(t._f("blogName")(e)))]),e.verified?i("span",{staticClass:"dropdown__item_name_verified"}):t._e()]),e.name?i("div",{staticClass:"dropdown__item_username"},[t._v(t._s("@"+e.uri))]):t._e()]):t._e(),"blog"!==t.type?i("div",{staticClass:"dropdown__item_text"},[t._v(t._s(t._f("unescape")(e[t.pr.label])))]):t._e()])})),0)],1)};s._withStripped=!0;var n=i(629).a,o=(i(674),i(0)),r=Object(o.a)(n,s,[],!1,null,"68bc8262",null);r.options.__file="src/components/ui/suggestedInput.vue";e.a=r.exports},667:function(t,e,i){"use strict";var s=i(617);i.n(s).a},668:function(t,e,i){"use strict";var s=i(618);i.n(s).a},669:function(t,e,i){"use strict";var s=i(620);i.n(s).a},670:function(t,e,i){"use strict";var s=i(621);i.n(s).a},671:function(t,e,i){"use strict";var s=i(627);i.n(s).a},672:function(t,e,i){var s=i(38),n=i(21);t.exports=function(t){return!0===t||!1===t||n(t)&&"[object Boolean]"==s(t)}},673:function(t,e,i){"use strict";var s=i(628);i.n(s).a},674:function(t,e,i){"use strict";var s=i(630);i.n(s).a},675:function(t,e,i){"use strict";var s=i(631);i.n(s).a},676:function(t,e,i){(function(t,s){var n;!function(o){e&&e.nodeType,t&&t.nodeType;var r="object"==typeof s&&s;r.global!==r&&r.window!==r&&r.self;var a,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function m(t){throw new RangeError(_[t])}function g(t,e){for(var i=t.length,s=[];i--;)s[i]=e(t[i]);return s}function f(t,e){var i=t.split("@"),s="";return i.length>1&&(s=i[0]+"@",t=i[1]),s+g((t=t.replace(d,".")).split("."),e).join(".")}function v(t){for(var e,i,s=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?s.push(((1023&e)<<10)+(1023&i)+65536):(s.push(e),n--):s.push(e);return s}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var s=0;for(t=i?h(t/700):t>>1,t+=h(t/e);t>455;s+=36)t=h(t/35);return h(s+36*t/(t+38))}function k(t){var e,i,s,n,o,r,a,l,u,d,_,p=[],g=t.length,f=0,v=128,C=72;for((i=t.lastIndexOf("-"))<0&&(i=0),s=0;s<i;++s)t.charCodeAt(s)>=128&&m("not-basic"),p.push(t.charCodeAt(s));for(n=i>0?i+1:0;n<g;){for(o=f,r=1,a=36;n>=g&&m("invalid-input"),((l=(_=t.charCodeAt(n++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:36)>=36||l>h((c-f)/r))&&m("overflow"),f+=l*r,!(l<(u=a<=C?1:a>=C+26?26:a-C));a+=36)r>h(c/(d=36-u))&&m("overflow"),r*=d;C=w(f-o,e=p.length+1,0==o),h(f/e)>c-v&&m("overflow"),v+=h(f/e),f%=e,p.splice(f++,0,v)}return b(p)}function $(t){var e,i,s,n,o,r,a,l,u,d,_,g,f,b,k,$=[];for(g=(t=v(t)).length,e=128,i=0,o=72,r=0;r<g;++r)(_=t[r])<128&&$.push(p(_));for(s=n=$.length,n&&$.push("-");s<g;){for(a=c,r=0;r<g;++r)(_=t[r])>=e&&_<a&&(a=_);for(a-e>h((c-i)/(f=s+1))&&m("overflow"),i+=(a-e)*f,e=a,r=0;r<g;++r)if((_=t[r])<e&&++i>c&&m("overflow"),_==e){for(l=i,u=36;!(l<(d=u<=o?1:u>=o+26?26:u-o));u+=36)k=l-d,b=36-d,$.push(p(C(d+k%b,0))),l=h(k/b);$.push(p(C(l,0))),o=w(i,f,s==n),i=0,++s}++i,++e}return $.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:k,encode:$,toASCII:function(t){return f(t,(function(t){return u.test(t)?"xn--"+$(t):t}))},toUnicode:function(t){return f(t,(function(t){return l.test(t)?k(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(90)(t),i(64))},677:function(t,e,i){"use strict";var s=i(633);i.n(s).a},678:function(t,e,i){"use strict";var s=i(634);i.n(s).a},679:function(t,e,i){"use strict";var s=i(635);i.n(s).a},680:function(t,e,i){"use strict";var s=i(639);i.n(s).a},681:function(t,e,i){"use strict";var s=i(641);i.n(s).a},682:function(t,e,i){"use strict";var s=i(643);i.n(s).a},683:function(t,e,i){"use strict";var s=i(644);i.n(s).a},684:function(t,e,i){"use strict";var s=i(645);i.n(s).a},685:function(t,e,i){"use strict";var s=i(647);i.n(s).a},686:function(t,e,i){"use strict";var s=i(648);i.n(s).a},687:function(t,e,i){"use strict";var s=i(649);i.n(s).a},688:function(t,e,i){"use strict";var s=i(650);i.n(s).a},689:function(t,e,i){"use strict";var s=i(651);i.n(s).a},703:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.imports.title")))]),t._l(t.sources,(function(e){return i("div",{key:e,staticClass:"settings__list_item settingsImports"},[i("div",{staticClass:"settingsImports__info"},[i("div",{staticClass:"settingsImports__logo",class:["m_"+e]},[i("Icon",{attrs:{name:"logo_"+e}})],1),i("div",{staticClass:"settingsImports__content"},[i("div",{staticClass:"settingsImports__source"},[t._v(t._s(t.$t("settings.imports."+e)))]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.unfinished[e]?i("div",{staticClass:"settingsImports__status"},[i("Icon",{staticClass:"settingsImports__status_loading",attrs:{name:"preloader_small"}}),i("span",{staticClass:"settingsImports__status_text"},[t._v(t._s(t.$t("import.steps."+e+"."+(t.imports[e].current_step||"pending"))))])],1):t._e()])],1),i("div",{staticClass:"settingsImports__actions"},[i("Button",{attrs:{type:"filled",loading:t.loading[e],disabled:t.unfinished[e]||t.loading[e],text:t.$t("settings.imports.transfer")},on:{click:function(i){return t.openPopup(e)}}})],1)]),t.unfinished[e]?t._e():i("transition-group",{staticClass:"settingsImports__list",attrs:{appear:!0,"leave-to-class":"m_hidden","enter-class":"m_hidden"}},t._l(t.list[e],(function(e){return i("div",{key:e.id,staticClass:"settingsImports__import"},[i("div",{staticClass:"settingsImports__import_status",class:t._f("importStatus")(e,"m_")}),i("div",{staticClass:"settingsImports__import_content"},[i("a",{staticClass:"settingsImports__import_value",attrs:{href:e.value,rel:"nofollow",target:"_blank"}},[t._v(t._s(t._f("importValue")(e.value)))]),i("div",{staticClass:"settingsImports__import_info"},[e.steps.length>1||e.steps[0].total>1?i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t.$t("import.success"))+": "+t._s(t._f("importSuccess")(e)))]):t._e(),e.steps.length>1||e.steps[0].total>1?i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t.$t("import.failed"))+": "+t._s(t._f("importFailed")(e)))]):t._e(),i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t._f("importDate")(e.finished_at,t.i18n)))])])])])})),0)],1)}))],2)]),i("ImportPopup",{attrs:{source:t.popup,id:t.id},on:{close:function(e){t.popup=null}}})],1)};s._withStripped=!0;var n=i(16),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:!!t.source,mode:"dark",width:"normal"},on:{close:t.close}},[i("div",{staticClass:"importPopup"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},["progress"===t.layout?i("div",{key:"progress",staticClass:"importPopup__layout m_progress"},[t.source&&t.blog?i("div",{staticClass:"importPopup__transfer"},[i("div",{staticClass:"importPopup__transfer_from",class:["m_"+t.source]},[i("Icon",{attrs:{name:"logo_"+t.source}})],1),i("div",{staticClass:"importPopup__transfer_split"},[t._v("→")]),t.blog.userpic?i("div",{staticClass:"importPopup__transfer_to",style:t._f("blogUserpicStyles")(t.blog)},[i("div",{staticClass:"importPopup__transfer_to_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):i("div",{staticClass:"importPopup__transfer_to m_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):t._e(),i("div",{staticClass:"importPopup__progress"},[i("div",{staticClass:"importPopup__progress_bar",style:t._f("progress")(t.current)})]),i("transition-group",{staticClass:"importPopup__steps"},[i("div",{key:"pending",staticClass:"importPopup__step"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[t.current.current_step||"finished"===t.current.status?i("div",{key:"done",staticClass:"importPopup__step_status m_done"},[i("Icon",{attrs:{name:"success"}})],1):i("div",{key:"loading",staticClass:"importPopup__step_status m_loading"},[i("Preloader")],1)]),i("div",{staticClass:"importPopup__step_name"},[t._v(t._s(t.$t("import.steps."+t.source+".pending")))])],1),t._l(t.current.steps,(function(e){return i("div",{key:e.step,staticClass:"importPopup__step"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[1===e.progress?i("div",{key:"done",staticClass:"importPopup__step_status m_done"},[i("Icon",{attrs:{name:"success"}})],1):t.current.current_step===e.step?i("div",{key:"loading",staticClass:"importPopup__step_status m_loading"},[i("Preloader")],1):i("div",{key:"pending",staticClass:"importPopup__step_status m_pending"},[i("Icon",{attrs:{name:"pending"}})],1)]),i("div",{staticClass:"importPopup__step_name",class:e.progress<1&&t.current.current_step!==e.step?"m_pending":""},[t._v(t._s(t.$t("import.steps."+t.source+"."+e.step)))])],1)}))],2)],1):"done"===t.layout?i("div",{key:"done",staticClass:"importPopup__layout m_done"},[i("div",{staticClass:"importPopup__done"},[t.blog&&t.blog.userpic?i("div",{staticClass:"importPopup__done_userpic",style:t._f("blogUserpicStyles")(t.blog)}):i("div",{staticClass:"importPopup__done_userpic m_logo"}),i("div",{staticClass:"importPopup__done_text"},[i("div",{staticClass:"importPopup__step"},[i("div",{staticClass:"importPopup__step_status"},[i("Icon",{attrs:{name:"success"}})],1),i("div",{staticClass:"importPopup__step_name"},[t._v(t._s(t.$t("import.done.text")))])])]),i("div",{staticClass:"importPopup__done_button"},[i("Button",{attrs:{type:"filled",text:t.$t("import.done.button")},on:{click:t.openBlog}})],1)])]):"form"===t.layout?i("form",{key:"form",staticClass:"importPopup__layout m_form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.source&&t.blog?i("div",{staticClass:"importPopup__transfer"},[i("div",{staticClass:"importPopup__transfer_from",class:["m_"+t.source]},[i("Icon",{attrs:{name:"logo_"+t.source}})],1),i("div",{staticClass:"importPopup__transfer_split"},[t._v("→")]),t.blog.userpic?i("div",{staticClass:"importPopup__transfer_to",style:t._f("blogUserpicStyles")(t.blog)},[i("div",{staticClass:"importPopup__transfer_to_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):i("div",{staticClass:"importPopup__transfer_to m_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):t._e(),t.check?i("div",{staticClass:"importPopup__form"},[i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label m_order",attrs:{"data-order":"1"}},[t._v(t._s(t.$t("import.check.first.label")))]),t.$t("import.check.first.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.check.first.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Copy",{attrs:{value:t.check}})],1)]),i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label m_order",attrs:{"data-order":"2"}},[t._v(t._s(t.$t("import.check.second.label")))]),t.$t("import.check.second.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.check.second.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Input",{attrs:{type:"text",label:t.$t("import.input")},on:{change:function(e){return t.value=e}}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.checkError?i("div",{staticClass:"importPopup__form_error"},[t._v(t._s(t.$t("import.errors.not_confirmed")))]):t._e()])],1)])]):i("div",{staticClass:"importPopup__form"},[i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label"},[t._v(t._s(t.$t("import.import.label")))]),t.$t("import.import.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.import.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Input",{attrs:{type:"text",label:t.$t("import.input")},on:{change:function(e){return t.value=e}}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.checkError?i("div",{staticClass:"importPopup__form_error"},[t._v(t._s(t.$t("import.errors.not_confirmed")))]):t._e()])],1)])]),i("div",{staticClass:"importPopup__submit"},[i("Button",{attrs:{type:"filled",text:t.$t("import.button"),disabled:!t.valid,loading:t.checkLoading},on:{click:t.submit}})],1)]):i("div",{key:"loading",staticClass:"importPopup__layout m_loading"},[i("div",{staticClass:"importPopup__loading"},[i("Preloader",{attrs:{inline:!0}})],1)])])],1)])};o._withStripped=!0;var r=i(201),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"copy",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.copy(e)}}},[i("input",{ref:"value",staticClass:"copy__value",attrs:{readonly:""},domProps:{value:t.value}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[t.copied?i("div",{key:"success",staticClass:"copy__button"},[i("IconButton",{attrs:{icon:"success"},on:{click:t.copy}})],1):i("div",{key:"copy",staticClass:"copy__button"},[i("IconButton",{attrs:{icon:"copy"},on:{click:t.copy}})],1)])],1)};a._withStripped=!0;var c=i(12),l=i(1),u={components:{IconButton:c.a},props:["value"],data:function(){return{copied:!1,copiedTO:null}},beforeDestroy:function(){if(this.copiedTO)return clearTimeout(this.copiedTO)},methods:{copy:function(){if(this.copiedTO&&clearTimeout(this.copiedTO),Object(l.c)(this.$refs.value))return this.$refs.value.blur(),this.copied=!0,this.copiedTO=setTimeout(()=>this.copied=!1,2500);Object(l.n)(this.$refs.value)}}},d=(i(678),i(0)),_=Object(d.a)(u,a,[],!1,null,"e8fe1fa0",null);_.options.__file="src/components/ui/copy.vue";var h=_.exports,p=i(62),m=i(7),g={components:{Modal:r.a,Copy:h,Input:p.a,Button:n.a,Preloader:m.a},props:["source","id","import"],data:function(){return{layout:null,checkError:!1,checkLoading:!1,check:null,currentId:null,value:""}},computed:{blog:function(){return this.$store.getters["blogs/byId"][this.id]},checkStatus:function(){return this.checkError?"fail":null},valid:function(){switch(this.source){case"livejournal":return/^(https?:\/\/(?:[a-z0-9-]+\.)+[a-z-]{2,15})(\/\d+\.html)$/i.test(this.value);case"telegraph":return/^https?:\/\/telegra.ph\/([^\?]+)/i.test(this.value);default:return!1}},current:function(){return this.$store.getters["imports/byId"][this.currentId||this.import]||null},layoutComputed:function(){return this.source&&this.current&&"finished"!==this.current.status?"progress":this.source&&this.current?"done":this.source&&null!=this.check?"form":"loading"}},filters:{progress:function(t){return{width:100*((null!=t?t.progress:void 0)||0)+"%"}}},watch:{layoutComputed:{handler:function(t,e){return"done"===t&&"progress"===e?this.layoutTO=setTimeout(()=>this.layout=t,1500):this.layout=t},immediate:!0}},mounted:function(){return this.$watch("source",(function(){return this.source?this.getCheck():this.clear()})),this.$watch("value",(function(){return this.checkError=!1}))},beforeDestroy:function(){if(this.layoutTO)return clearTimeout(this.layoutTO)},methods:{getCheck:function(){if(this.source)return this.$store.dispatch("imports/check",{blog_id:this.id,source:this.source}).then(({check:t})=>this.check=t||!1)},submit:function(){if(this.valid)return this.checkLoading=!0,this.checkError=!1,this.trackEvent(["settings","import_start",this.source]),this.$store.dispatch("imports/import",{blog_id:this.id,source:this.source,value:this.value}).then(t=>(this.currentId=t.id,this.checkLoading=!1)).catch(t=>(this.checkLoading=!1,"not_confirmed"===t?this.checkError=!0:this.errorAlert(t)))},errorAlert:function(t){var e;return e=t&&this.i18n.t.settings.errors[t]?"settings.errors."+t:"settings.errors.other",this.$store.dispatch("alerts/add",{type:"error",locale:e})},openBlog:function(){return this.$store.dispatch("blogs/closeSettings"),this.$ttrouter.push({name:"blog",blog:this.blog,params:{uri:this.blog.uri}})},close:function(){return this.$emit("close")},clear:function(){return this.checkError=!1,this.checkLoading=!1,this.check=null,this.currentId=null,this.value=""}}},f=(i(679),Object(d.a)(g,o,[],!1,null,"eeaa669e",null));f.options.__file="src/components/settings/import.vue";var v=f.exports,b=i(4),C=i.n(b),w=i(39),k=i.n(w),$=i(273),y=i.n($),x=i(636),P=i.n(x),I=i(57),T=i.n(I),S=i(2),B=i.n(S),D=i(108),j=i.n(D),E=i(6),L=i.n(E),M=(i(37),i(264)),O={name:"settings-imports",components:{Button:n.a,ImportPopup:v},props:{id:{},sources:{default:function(){return["livejournal","telegraph"]}}},data:function(){return{popup:null,fetched:!1}},computed:{list:function(){var t,e,i;return e={},t=this.id,i=this.$store.getters["imports/byKey"],B()(this.sources,(function(s){return e[s]=i[Object(M.b)({source:s,blog_id:t})]||[],!0})),e},imports:function(){return j()(this.list,(function(t){return k()(t)||null}))},unfinished:function(){return j()(this.list,(function(t){return!P()(t,{status:"finished"})}))},hasUnfinished:function(){return y()(this.unfinished)},loading:function(){return j()(this.imports,t=>!this.fetched&&null==t&&this.$store.state.imports.loading)}},filters:{progress:function(t){return{width:100*((null!=t?t.progress:void 0)||0)+"%"}},importStatus:function(t,e=""){var i;return 0===(i=T()(t.steps,(function(t,e){return t.success+=e.current-e.failed,t.failed+=e.failed,t.total+=e.total,t}),{success:0,failed:0,total:0})).success&&i.failed>0?e+"fail":i.success>0&&i.failed>0||i.success+i.failed<i.total?e+"warn":e+"done"},importValue:function(t){return t.replace(/^https?:\/\//,"").replace(/\/$/,"")},importDate:function(t,e){return L()(t).locale(e.l).format(e.t.import.date)},importSuccess:function(t){var e;return(e=C()(t.steps,{step:"article"}))?e.current:T()(t.steps,(function(t,e){return t+e.current}),0)},importFailed:function(t){var e;return(e=C()(t.steps,{step:"article"}))?e.failed:T()(t.steps,(function(t,e){return t+e.failed}),0)}},mounted:function(){return this.fetch(),this.$watch("id",(function(){return clearTimeout(this._updateTO),this.fetched=!1,this.fetch()})),this.$watch("hasUnfinished",(function(t,e){return!t&&e?this.$store.dispatch("blogs/updateBlogPage",this.id):this.autoupdate()}))},beforeDestroy:function(){return clearTimeout(this._updateTO)},methods:{fetch:function(){return this.$store.dispatch("imports/fetch",this.id).then(()=>(this.fetched=!0,this.autoupdate()))},autoupdate:function(){if(this.hasUnfinished)return clearTimeout(this._updateTO),this._updateTO=setTimeout(()=>this.fetch(),2500)},openPopup:function(t){return this.trackEvent(["settings","import_click",t]),this.popup=t}}},A=(i(680),Object(d.a)(O,s,[],!1,null,"df4b2adc",null));A.options.__file="src/components/settings/imports.vue";e.a=A.exports},704:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("form",{staticClass:"settings__form",attrs:{name:"main"},on:{submit:t.submit}},[i("button",{staticClass:"settings__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.userpic.title")))]),i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col"},[i("UserpicInput",{ref:"userpic",attrs:{name:"userpic",value:t.fields.userpic},on:{click:t.onClickUserpic,change:function(e){return t.changeField("userpic",e)},error:function(e){return t.setError(null,e)}}})],1),i("div",{staticClass:"settings__col m_actions"},[i("div",{staticClass:"settings__field_description"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.userpic.save")},on:{click:t.clickUserpic}})],1),i("div",{staticClass:"settings__field_description"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.userpic.remove"),disabled:!t.fields.userpic},on:{click:function(e){return t.changeField("userpic",null)}}})],1)])]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"userpic"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.uri.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"uri",label:t.$t("settings.uri.placeholder"),value:t.fields.uri,prefix:t.serviceLink,readonly:!t.blog.admin,max:30},on:{change:function(e){return t.changeField("uri",e)}}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"uri"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.name.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"name",label:t.$t("settings.name.placeholder"),value:t.fields.name,max:100},on:{change:function(e){return t.changeField("name",e)}}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"name"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.bio.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"bio",mode:"textarea",label:t.$t("settings.bio.placeholder"),value:t.fields.bio,max:150,counter:!0},on:{change:function(e){return t.changeField("bio",e)}}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"bio"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.website.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"website",label:t.$t("settings.website.placeholder"),value:t.fields.website,max:450},on:{change:function(e){return t.changeField("website",e)}}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"website"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.list_style.title")))]),i("div",{staticClass:"settings__field_input"},[i("Checkbox",{attrs:{name:"comments_enabled",label:t.$t("settings.comments_enabled"),checked:t.fields.comments_enabled},on:{change:function(e){return t.changeField("comments_enabled",e)}}}),i("Checkbox",{attrs:{name:"reactions_enabled",label:t.$t("settings.reactions_enabled"),checked:t.fields.reactions_enabled},on:{change:function(e){return t.changeField("reactions_enabled",e)}}}),i("Checkbox",{attrs:{name:"show_teammates",label:t.$t("settings.show_teammates"),checked:t.fields.show_teammates},on:{change:function(e){return t.changeField("show_teammates",e)}}}),t.blog.personal?i("Checkbox",{attrs:{name:"main_page_walpappers",label:t.$t("settings.main_page_walpappers"),checked:t.fields.main_page_walpappers},on:{change:function(e){return t.changeField("main_page_walpappers",e)}}}):t._e()],1)])]),i("div",{staticClass:"settings__form_footer"},[i("Button",{attrs:{disabled:!t.hasChanges||t.submiting,text:t.$t("settings.cancel")},on:{click:t.reset}}),i("Button",{attrs:{type:"filled",loading:t.submiting,disabled:!(t.isValid&&t.hasChanges||t.submiting),text:t.$t("settings.save")},on:{click:t.submit}})],1)]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)};s._withStripped=!0;var n=i(7),o=i(16),r=i(62),a=i(616),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"userpicInput",class:{m_exists:t.isExists,m_progress:t.inProgress},on:{dragenter:t.dragEnter,dragover:t.dragEnter,dragleave:t.dragLeave,drop:t.drop}},[i("input",{ref:"file",staticClass:"userpicInput__input",attrs:{type:"file",name:t.name,accept:t.accept},on:{change:t.input,click:function(e){return t.$emit("click")}}}),i("div",{staticClass:"userpicInput__current",class:{m_empty:!t.userpicStyle,m_drag:t.inDrag},style:t.userpicStyle}),i("transition",{attrs:{mode:"out-in","enter-class":"m_hidden","leave-to-class":"m_hidden","enter-active-class":"m_transition","leave-active-class":"m_transition"}},[t.inProgress?i("div",{key:"progress",staticClass:"userpicInput__progress"},[i("Icon",{attrs:{name:"preloader"}})],1):i("div",{key:"upload",staticClass:"userpicInput__state",class:{m_drag:t.inDrag}},[i("Icon",{attrs:{name:"upload"}})],1)])],1)};c._withStripped=!0;var l=i(10),u=i.n(l),d=i(623),_=i.n(d),h=i(4),p=i.n(h),m=i(34),g=i.n(m),f={props:["name","value"],data:function(){return{inProgress:!1,inDrag:!1,file:null,current:null}},computed:{config:function(){return this.$store.state.config.app.media},accept:function(){return u()(this.config.accept,(function(t){return t.types.join(",")})).join(",")},isExists:function(){return!!this.current||!!this.value},userpicStyle:function(){return this.current||this.value?{"background-image":`url('${this.current||this.value}')`}:null}},watch:{value:function(){if(this.value!==this.file)return this.removeFile()}},methods:{click:function(){return this.$refs.file.click()},dragEnter:function(t){return this.inDrag=!0,this.drag(t)},dragLeave:function(t){return this.inDrag=!1,this.drag(t)},drag:function(t){return t.preventDefault(),t.stopPropagation(),!1},drop:function(t){var e;return t.preventDefault(),t.stopPropagation(),this.inDrag=!1,e=t.dataTransfer.files,this.$emit("click"),this.setFile(e[0]),!1},input:function(t){var e;return(e=this.$refs.file.files[0])?this.setFile(e):this.removeFile()},checkFile:function(t){return this.config.max_userpic_size>0&&t.size>this.config.max_userpic_size?"file_to_large":_()(this.config.accept)>0&&!p()(this.config.accept,(function(e){return g()(e.types,t.type)}))&&"unsupported_media_type"},setFile:function(t){var e;return(e=this.checkFile(t))?this.$emit("error",e,this.name):(this.inProgress=!0,this.$modules.$media.toURL(t).then(e=>(this.file=t,this.current=e,this.inProgress=!1,this.$emit("change",this.file,this.name))))},removeFile:function(){var t;if(this.file&&(this.file=null,this.$emit("change",this.value,this.name)),this.current)return null!=(t=window.URL)&&"function"==typeof t.revokeObjectURL&&t.revokeObjectURL(this.current),this.current=null}}},v=(i(671),i(0)),b=Object(v.a)(f,c,[],!1,null,"b1c5a034",null);b.options.__file="src/components/ui/userpicInput.vue";var C=b.exports,w=i(13),k=i.n(w),$=i(25),y=i.n($),x=i(672),P=i.n(x),I=i(2),T=i.n(I),S=i(11),B=i.n(S),D=i(26),j=i.n(D),E={name:"settings-main",components:{Preloader:n.a,Button:o.a,Input:r.a,Checkbox:a.a,UserpicInput:C},props:["id"],data:function(){return{fields:{uri:null,name:null,bio:null,website:null,userpic:null,list_style:null,show_teammates:!1,comments_enabled:!1,reactions_enabled:!1,main_page_walpappers:!1},submiting:!1,error:{field:null,text:null}}},computed:{blog:function(){return this.$store.getters["blogs/byId"][this.id]},blogFields:function(){var t;return this.blog?(t={},T()(B()(this.fields),e=>{var i;return i=this.blog[e],P()(this.fields[e])&&(i=!!i),t[e]=i,!0}),t):{}},changedFields:function(){var t;return t=[],T()(B()(this.fields),e=>{var i,s;if(s=this.fields[e],i=this.blog[e],P()(s)&&(i=!!i),s!==i)return t.push(e)}),t},invalidFields:function(){var t;return t=[],T()(B()(this.fields),e=>{if(!this.isValidField(e,this.fields[e]))return t.push(e)}),t},hasChanges:function(){return!k()(this.changedFields)},isValid:function(){return k()(this.invalidFields)},serviceLink:function(){return this.$store.state.config.app.url.site.replace(/^https?:\/\//i,"")+"/@"}},methods:{submit:function(t){var e,i,s,n;if(t.preventDefault(),!this.submiting&&this.hasChanges&&this.isValid)return this.submiting=!0,s=this.id,i=j()(this.fields,this.changedFields),n=this.blog.uri,e=()=>this.$store.dispatch("blogs/edit",{id:s,fields:i}).then(()=>{var t;if(this.submiting=!1,(t=this.$route).params.uri===n&&i.uri)return t.params.uri=i.uri,this.$router.replace(t)},t=>(this.submiting=!1,"already_exists"===(null!=t?t.error:void 0)?this.setError("uri","uri_already_exists"):this.setError(null,null!=t?t.error:void 0))),i.userpic instanceof File?this.$modules.$media.upload(i.userpic,"userpics").then((function({url:t}){return t?i.userpic=t:delete i.userpic,e()}),t=>(this.submiting=!1,this.setError(null,null!=t?t.error:void 0))):e()},reset:function(t){return t.preventDefault(),this.initFields()},changeField:function(t,e){return this.fields[t]=this.prepareField(t,e),this.unsetError()},setError:function(t=null,e=null){var i;return i=this.i18n.t.settings.errors[e]?"settings.errors."+e:"settings.errors.other",t?(this.error.field=t,this.error.text=e?this.$t(i):null):this.$store.dispatch("alerts/add",{type:"error",locale:i})},unsetError:function(){return this.error.field=null,this.error.text=null},clickUserpic:function(){return this.$refs.userpic.click()},onClickUserpic:function(){return this.trackEvent(["settings","click_uploadimage"])},prepareField:function(t,e){switch(t){case"uri":if(y()(e))return null!=e?e.toLowerCase():void 0;break;case"website":return y()(e)?(e=null!=e?e.toLowerCase():void 0,/^(https?:)?\/\//i.test(e)||(e="http://"+(e=e.replace(/(\w+:)?\/\//,""))),e):e}return e},isValidField:function(t,e){var i,s;switch(t){case"uri":return/^[a-z0-9]{1}[a-z0-9.\-_\+]{1,30}[a-z0-9]{1}$/i.test(e);case"name":return!e||0<=(i=e.length)&&i<=100;case"bio":return!e||0<=(s=e.length)&&s<=150;case"website":return!e||/^(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])$/i.test(e);default:return!0}},initFields:function(){if(this.blog)return T()(B()(this.fields),t=>{var e;return e=this.blog[t],P()(this.fields[t])&&(e=!!e),this.fields[t]=e,!0})}},watch:{blog:{handler:"initFields",immediate:!0}}},L=(i(673),Object(v.a)(E,s,[],!1,null,"011e3c76",null));L.options.__file="src/components/settings/main.vue";e.a=L.exports},705:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[t.blog.admin?i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col m_main"},[i("SuggestedInput",{attrs:{name:"suggest_teammates",type:"blog",action:"blogs/suggestTeammates",getter:"blogs/suggestedTeammates",placeholder:t.$t("settings.teammates.placeholder"),value:t.adding_teammate,loading:!!t.adding_teammate,queryParams:{blog_id:t.id,limit:3}},on:{change:t.addTeammate}})],1)])]):t._e(),i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title m_list"},[t._v(t._s(t.$t("settings.teammates.list")))]),i("transition-group",{staticClass:"settings__list",attrs:{tag:"div",appear:t.render,"leave-to-class":"m_hidden","enter-class":"m_hidden","appear-class":"m_hidden"}},t._l(t.teammates,(function(e){return i("SettingsTeammate",{key:e.id,attrs:{teammate:e,blog:t.blog,actons_open:t.actons_open},on:{actions:function(e){return t.actons_open=e}}})})),1)],1)])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)};s._withStripped=!0;var n=i(7),o=i(666),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings__list_item settingsTeammate"},[i("div",{staticClass:"settingsTeammate__content"},[i("Userpic",{staticClass:"settingsTeammate__userpic",attrs:{blog:t.teammate}}),i("div",{staticClass:"settingsTeammate__name"},[i("span",[t._v(t._s(t._f("blogName")(t.teammate)))]),t.teammate.verified?i("span",{staticClass:"settingsTeammate__name_verified"}):t._e()])],1),i("div",{staticClass:"settingsTeammate__actions"},[t.canChangeRights||t.canDelete?i("Dropdown",{attrs:{open:t.actons_open===t.teammate.id,anchor:t.$refs.action},on:{close:t.closeActions}},[t.canChangeRights&&t.teammate.admin?i("div",{staticClass:"dropdown__item",on:{click:function(e){return t.editTeammate(!1)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.unmake_admin")))])]):t.canChangeRights?i("div",{staticClass:"dropdown__item",on:{click:function(e){return t.editTeammate(!0)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.make_admin")))])]):t._e(),t.canDelete?i("div",{staticClass:"dropdown__item m_danger",on:{click:t.removeTeammate}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.delete")))])]):t._e()]):t._e(),i("Button",{ref:"action",attrs:{type:"text",display:"inline",color:"muted",text:t.teammate.admin?t.$t("settings.teammates.admin"):t.$t("settings.teammates.not_admin"),loading:t.loading,disabled:!t.canChangeRights&&!t.canDelete,dropdown:t.actons_open===t.teammate.id},on:{click:t.toggleActions}})],1)])};r._withStripped=!0;var a=i(202),c=i(16),l=i(89),u={components:{Userpic:a.a,Button:c.a,Dropdown:l.a},props:["teammate","blog","actons_open"],data:function(){return{loading:!1}},computed:{id:function(){return this.teammate.id},profile:function(){return this.$store.getters["account/profile"]},itsMe:function(){return this.profile.id===this.teammate.id},canChangeRights:function(){return!this.teammate.owner&&this.blog.admin},canDelete:function(){return!(this.blog.teammates.length<=1)&&(!(this.teammate.owner&&!this.itsMe)&&((!this.blog.personal||this.blog.id!==this.teammate.id)&&(!!this.itsMe||this.blog.admin)))}},methods:{closeActions:function(){if(this.actons_open===this.id)return this.$emit("actions",null)},toggleActions:function(){return this.$emit("actions",this.actons_open===this.id?null:this.id)},editTeammate:function(t){var e,i;return i=this.id,e=this.blog.id,this.loading=!0,this.closeActions(),this.$store.dispatch("blogs/editTeammate",{id:i,blog_id:e,admin:t}).then(()=>this.loading=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.loading=!1))},removeTeammate:function(){var t,e,i;return e=this.id,t=this.blog.id,this.loading=!0,this.closeActions(),i=this.teammate.name||"@"+this.teammate.uri,this.$store.dispatch("confirms/add",{message:this.$t("confirms.remove_teammate",{user:i}),type:"delete"}).then(()=>this.$store.dispatch("blogs/removeTeammate",{id:e,blog_id:t}),(function(){})).then(()=>this.loading=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.loading=!1))}}},d=(i(675),i(0)),_=Object(d.a)(u,r,[],!1,null,"80904f24",null);_.options.__file="src/components/settings/teammate.vue";var h=_.exports,p={name:"settings-teammates",components:{Preloader:n.a,SuggestedInput:o.a,SettingsTeammate:h},props:["id"],data:function(){return{render:!1,adding_teammate:null,actons_open:null}},computed:{blog:function(){return this.$store.getters["blogs/byId"][this.id]},teammates:function(){var t;return(null!=(t=this.blog)?t.teammates:void 0)||[]}},methods:{addTeammate:function(t){var e;return this.adding_teammate=t,e=this.id,this.$store.dispatch("blogs/addTeammate",{blog_id:e,id:t}).then(()=>this.adding_teammate=null,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.adding_teammate=null))}},mounted:function(){return this.render=!0}},m=Object(d.a)(p,s,[],!1,null,null,null);m.options.__file="src/components/settings/teammates.vue";e.a=m.exports},706:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[t.topics.length<t.config.max_users_topics?i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col m_main"},[i("SuggestedInput",{attrs:{name:"suggest_topics",type:"topic",action:"blogs/suggestTopics",getter:"blogs/suggestedTopics",placeholder:t.$t("settings.topics.placeholder"),value:t.adding_topic,queryValue:t.new_topic_name,queryParams:{blog_id:t.id,limit:5},changesMode:"enter"},on:{input:function(e){return t.setNewTopicName(e)},enter:function(e){return t.setNewTopicName(e,!0)}}})],1),i("div",{staticClass:"settings__col"},[i("Button",{attrs:{type:"filled",text:t.$t("settings.topics.add"),loading:!!t.adding_topic,disabled:!t.new_topic_name},on:{click:t.addTopic}})],1)]),0===t.topics.length?i("div",{staticClass:"settings__field_text"},[t._v(t._s(t.$t("settings.topics.empty")))]):t._e()]):t._e(),t.topics.length>0?i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title m_list"},[t._v(t._s(t.topics.length)+" "+t._s(t.$t("settings.topics.list",t.topics.length)))]),i("transition-group",{staticClass:"settings__list",attrs:{tag:"div",appear:t.render,"leave-to-class":"m_hidden","enter-class":"m_hidden","appear-class":"m_hidden"}},t._l(t.topics,(function(e){return i("SettingsTopic",{key:e.id,staticClass:"settings__list_item",attrs:{topic:e,blog:t.blog,editing:t.editing_topic===e.id},on:{editing:function(i){return t.toggleEditing(e.id,i)}}})})),1)],1):t._e()])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)};s._withStripped=!0;var n=i(666),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.editing?"form":"div",{tag:"component",staticClass:"settingsTopic",on:{submit:function(e){return e.preventDefault(),t.editTopic(e)}}},[t.editing?i("div",{staticClass:"settingsTopic__content"},[i("div",{staticClass:"settingsTopic__name"},[t._v(t._s(t._f("unescape")(t.topic.name)))]),i("div",{staticClass:"settingsTopic__field"},[i("Input",{attrs:{mode:"content",max:500,label:t.$t("settings.topics.description")},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),i("div",{staticClass:"settingsTopic__field"},[i("Input",{attrs:{prefix:t.blogUrl+"/+",max:100,label:t.$t("settings.topics.uri"),status:t.uriStatus},model:{value:t.uri,callback:function(e){t.uri=e},expression:"uri"}})],1)]):i("div",{staticClass:"settingsTopic__content"},[i("div",{staticClass:"settingsTopic__name"},[t._v(t._s(t._f("unescape")(t.topic.name)))]),i("div",{staticClass:"settingsTopic__description"},[t._v(t._s(t.topic.description))]),i("div",{staticClass:"settingsTopic__link"},[t._v(t._s(t.blogUrl)+"/+"+t._s(t.topic.uri||"topic"+t.topic.id))])]),t.editing?i("div",{staticClass:"settingsTopic__actions"},[i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",icon:"enter",button:"submit",loading:t.saveing,disabled:!t.valid},on:{click:t.editTopic}})],1),i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",icon:"close",disabled:t.saveing},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(!1)}}})],1)]):i("div",{staticClass:"settingsTopic__actions"},[i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",icon:"article_edit"},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(!0)}}})],1),i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",icon:"trash",loading:t.deleteing},on:{click:function(e){return t.removeTopic(t.topic.id)}}})],1)])])};o._withStripped=!0;var r=i(632).a,a=(i(677),i(0)),c=Object(a.a)(r,o,[],!1,null,"176860d3",null);c.options.__file="src/components/settings/topic.vue";var l=c.exports,u=i(16),d=i(7),_={name:"settings-topics",components:{SuggestedInput:n.a,SettingsTopic:l,Button:u.a,Preloader:d.a},props:["id"],data:function(){return{render:!1,editing_topic:null,adding_topic:null,enter_topic:null,deleteing_topic:null,new_topic_name:null}},computed:{config:function(){return this.$store.state.config.app},blog:function(){return this.$store.getters["blogs/byId"][this.id]},topics:function(){var t;return(null!=(t=this.blog)?t.topics:void 0)||[]}},methods:{setNewTopicName:function(t,e=!1){return this.new_topic_name===t?this.addTopic():this.new_topic_name=t},toggleEditing:function(t,e){return this.editing_topic=e?t:null},addTopic:function(){var t,e;if(e=this.new_topic_name)return this.adding_topic=e,t=this.id,this.$store.dispatch("blogs/addTopic",{blog_id:t,name:e}).then(()=>(this.adding_topic=null,this.enter_topic=null,this.new_topic_name=null),()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.adding_topic=null,this.enter_topic=null))}},mounted:function(){return this.render=!0}},h=Object(a.a)(_,s,[],!1,null,null,null);h.options.__file="src/components/settings/topics.vue";e.a=h.exports},707:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog&&t.itsMe?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.account.title")))]),i("div",{staticClass:"settings__field_list"},[t.blog.email?i("div",{staticClass:"settings__list_item settingsSocial"},[i("div",{staticClass:"settingsSocial__icon m_email"},[i("Icon",{attrs:{name:"email"}})],1),i("div",{staticClass:"settingsSocial__content"},[i("div",{staticClass:"settingsSocial__name"},[t._v(t._s(t.$t("settings.account.email")))]),t.blog.email?i("div",{staticClass:"settingsSocial__user"},[t._v(t._s(t.blog.email))]):t._e()]),i("div",{staticClass:"settingsSocial__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.account.change_password")},on:{click:function(e){t.password_popup=!t.password_popup}}})],1),i("SettingsPassword",{attrs:{show:t.password_popup},on:{close:function(e){t.password_popup=!1}}})],1):t._e(),t._l(t.socials,(function(e){return i("div",{key:e,staticClass:"settings__list_item settingsSocial"},[i("div",{staticClass:"settingsSocial__icon",class:"m_"+e},[i("Icon",{attrs:{name:"logo_"+e}})],1),i("div",{staticClass:"settingsSocial__content"},[i("div",{staticClass:"settingsSocial__name"},[t._v(t._s(t.$t("settings.account."+e)))]),t.blogIds[e]?i("div",{staticClass:"settingsSocial__user"},[t._v(t._s(t._f("socialString")(t.blog,e)))]):t._e()]),t.supporting[e]&&!t.blogIds[e]?i("div",{staticClass:"settingsSocial__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.account.link"),frame:t.iframes[e],loading:t.linking===e},on:{click:function(i){return t.link(e)}}})],1):t.canUnlink?i("div",{staticClass:"settingsSocial__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.account.unlink"),loading:t.unlinking===e},on:{click:function(i){return t.unlink(e)}}})],1):t._e()])}))],2)]),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.account.language.title")))]),i("div",{staticClass:"settings__field_list"},[i("div",{staticClass:"settings__list_item settingsLang"},[i("div",{staticClass:"settingsLang__icon",class:"m_"+t.$t("lang")}),i("div",{staticClass:"settingsSocial__content"},[i("span",{staticClass:"settingsLang__name"},[t._v(t._s(t.$t("lang_display")))])]),i("div",{staticClass:"settingsLang___actions"},[i("Button",{ref:"lang",attrs:{type:"text",display:"inline",color:"muted",text:t.$t("settings.account.language.button"),dropdown:t.lang_dropdown,loading:t.setting_lang},on:{click:function(e){t.lang_dropdown=!t.lang_dropdown}}})],1),i("Dropdown",{attrs:{open:t.lang_dropdown,anchor:t.$refs.lang},on:{close:function(e){t.lang_dropdown=!1}}},t._l(t.langs,(function(e){return i("div",{staticClass:"dropdown__item",on:{click:function(i){return t.setLang(e.lang)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(e.label))])])})),0)],1)])]),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title m_danger"},[t._v(t._s(t.$t("settings.account.danger.title")))]),i("div",{staticClass:"settings__field_button"},[i("Button",{attrs:{color:"alarm",text:t.$t("settings.account.danger.delete"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!1)}}})],1),i("div",{staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.account.danger.delete_text",{blog:t.blogName}))}})])])]):t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title m_danger"},[t._v(t._s(t.$t("settings.account.danger.title")))]),i("div",{staticClass:"settings__field_button"},["delete"===t.deleteAction?i("Button",{attrs:{color:"alarm",text:t.$t("settings.account.danger.delete"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!1)}}}):i("Button",{attrs:{color:"alarm",text:t.$t("settings.account.danger.leave"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!0)}}})],1),"delete"===t.deleteAction?i("div",{staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.account.danger.delete_text",{blog:t.blogName}))}}):t._e()])])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)};s._withStripped=!0;var n=i(7),o=i(16),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,mode:"dark",width:"form"},on:{close:t.close}},[i("form",{staticClass:"settingsPassword",on:{submit:t.submit}},[i("button",{staticClass:"settingsPassword__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"settingsPassword__caption"},[i("div",{staticClass:"settingsPassword__caption_title"},[t._v(t._s(t.$t("settings.password.title")))]),i("div",{staticClass:"settingsPassword__caption_close"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)]),i("div",{staticClass:"settingsPassword__form"},[i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"old_password",attrs:{name:"old_password",type:"password",label:t.$t("settings.password.old_password"),value:t.fields.old_password,max:255,autocomplete:"current-password"},on:{change:function(e){return t.fields.old_password=e}}})],1),i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"password",attrs:{name:"password",type:"password",label:t.$t("settings.password.password"),value:t.fields.password,max:255,autocomplete:"new-password"},on:{change:function(e){return t.fields.password=e}}})],1),i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"confirm_password",attrs:{name:"confirm_password",type:"password",label:t.$t("settings.password.confirm_password"),value:t.fields.confirm_password,max:255,autocomplete:"new-password"},on:{change:function(e){return t.fields.confirm_password=e}}})],1)]),i("div",{staticClass:"settingsPassword__footer"},[i("div",{staticClass:"settingsPassword__footer_item"},[i("Button",{attrs:{text:t.$t("settings.cancel"),disabled:t.submiting},on:{click:t.close}})],1),i("div",{staticClass:"settingsPassword__footer_item"},[i("Button",{attrs:{type:"filled",text:t.$t("settings.save"),loading:t.submiting,disabled:!t.submiting&&!t.isValid},on:{click:t.submit}})],1)])])])};r._withStripped=!0;var a=i(640).a,c=(i(681),i(0)),l=Object(c.a)(a,r,[],!1,null,"37e388b2",null);l.options.__file="src/components/settings/password.vue";var u=l.exports,d=i(11),_=i.n(d),h=i(2),p=i.n(h),m=i(642),g=i.n(m),f={name:"settings-account",components:{Preloader:n.a,Button:o.a,SettingsPassword:u},props:["id"],data:function(){return{password_popup:!1,lang_dropdown:!1,unlinking:!1,setting_lang:!1,deleteing:!1}},computed:{config:function(){return this.$store.state.config.app},account:function(){return this.$store.state.account},blog:function(){return this.$store.getters["blogs/byId"][this.id]},langs:function(){return this.$store.getters["langs/list"]},langsTexts:function(){return this.$store.getters["langs/texts"]},itsMe:function(){return this.id===this.account.id},deleteAction:function(){return this.blog.owner||this.blog.personal&&this.itsMe?"delete":"leave"},canUnlink:function(){return g()([this.blog.email,this.blog.facebook_id,this.blog.google_id,this.blog.telegram_id,this.blog.twitch_id,this.blog.apple_id]).length>1},blogIds:function(){return{facebook:this.blog.facebook_id,google:this.blog.google_id,telegram:this.blog.telegram_id,twitch:this.blog.twitch_id,apple:this.blog.apple_id}},socials:function(){return _()(this.blogIds)},supporting:function(){var t;return t={},p()(this.$store.getters["auth/supporting"],(function(e){return t[e]=!0})),t},inProcess:function(){return this.$store.state.auth.inProcess},linking:function(){var t;return null!=(t=this.inProcess)?t.type:void 0},iframes:function(){return this.$store.getters["auth/iframes"]},blogName:function(){return this.blog?this.blog.name||"@"+this.blog.uri:null}},filters:{socialString:function(t,e){var i;return i=[],t[e+"_name"]&&i.push(t[e+"_name"]),t[e+"_username"]&&i.push(t[e+"_username"]),t[e+"_email"]&&i.push(t[e+"_email"]),i.join(", ")}},watch:{inProcess:function(){return this._process()}},methods:{_process:function(){if(this.inProcess)return this.inProcess.promise.then(()=>this.$store.dispatch("blogs/byId",{id:this.id,force:!0})).catch(t=>{var e;return"already_connected"===(null!=t&&null!=(e=t.data)?e.error:void 0)?this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.already_connected"}):this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})})},link:function(t){if(t)return this.$store.dispatch("account/"+t).then(()=>this.$store.dispatch("blogs/byId",{id:this.id,force:!0})).catch(()=>{})},unlink:function(t){if(!this.unlinking)return this.unlinking=t,this.$store.dispatch("account/unlink",t).then(()=>this.$store.dispatch("blogs/byId",{id:this.id,force:!0})).catch(()=>this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})).then(()=>this.unlinking=!1)},setLang:function(t){if(this.lang_dropdown=!1,!this.setting_lang)return this.setting_lang=t,this.$store.dispatch("langs/lang",t),this.$store.dispatch("account/setLang",t).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),!0)).then(()=>this.setting_lang=!1)},deleteBlog:function(t=!1){var e,i;return"",e=this.blogName,i=t?"confirms.leave":"confirms.blog",this.deleteing=!0,this.$store.dispatch("confirms/add",{message:this.$t(i,{blog:e}),type:t?"leave":"delete",icon:t?null:"trash_big"}).then(()=>this.$store.dispatch("blogs/delete",this.id).then(()=>{if(this.trackEvent(["settings","delete_blog"]),this.itsMe?this.logout():(this.$store.dispatch("account/fetch"),this.$emit("blog")),this.$route.params.uri&&this.blog.uri)return this.$ttrouter.replace({name:"main",domain:null})}),(function(){})).then(()=>this.deleteing=!1).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.deleteing=!1))},signOut:function(){return this.logout(),this.trackEvent(["settings","sign_out"])},logout:function(){return this.$store.dispatch("account/logout")}}},v=(i(682),Object(c.a)(f,s,[],!1,null,"6b607bd1",null));v.options.__file="src/components/settings/account.vue";e.a=v.exports},708:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settingsMenu"},[t.current?i("div",{staticClass:"settingsMenu__item m_wrap",on:{click:t.toggle}},[i("div",{staticClass:"settingsMenu__blog"},[t.current.userpic?i("div",{staticClass:"settingsMenu__blog_userpic",style:t._f("blogUserpicStyles")(t.current)}):i("div",{staticClass:"settingsMenu__blog_userpic m_letter",style:t._f("blogBgStyles")(t.current)},[t._v(t._s(t._f("blogAbbr")(t.current)))]),i("div",{staticClass:"settingsMenu__blog_name"},[t._v(t._s(t.$t("settings.title")))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.section&&!t.open,expression:"section && !open"}],staticClass:"settingsMenu__section"},[i("div",{staticClass:"settingsMenu__topic_name"},[t._v(t._s(t.$t("settings.sections."+t.section)))])])]):t._e(),i("div",{staticClass:"settingsMenu__split"}),i("div",{staticClass:"settingsMenu__item"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)])};s._withStripped=!0;var n={components:{IconButton:i(12).a},props:["current","section","open"],computed:{account:function(){return this.$store.state.account},profile:function(){return this.$store.getters["account/profile"]}},methods:{toggle:function(){return this.$emit("toggle",!this.open)},close:function(){return this.$emit("close")}}},o=(i(669),i(0)),r=Object(o.a)(n,s,[],!1,null,"4816a32a",null);r.options.__file="src/components/settings/menu.vue";e.a=r.exports},709:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settingsSwitcher"},[i("div",{staticClass:"settingsSwitcher__group"},[t.currentBlog?i("div",{ref:"blogs_switcher",staticClass:"settingsSwitcher__blog",class:{m_dropdown:t.account.blogs&&t.account.blogs.length>1,m_dropdown_open:t.blogs_dropdown},on:{click:function(e){t.blogs_dropdown=!t.blogs_dropdown}}},[i("div",{staticClass:"settingsSwitcher__blog_name"},[t.currentBlog.id===t.account.id?i("span",[t._v(t._s(t.$t("settings.personal_blog")))]):i("span",[t._v(t._s(t.currentBlog.name||"@"+t.currentBlog.uri))])]),t.account.blogs&&t.account.blogs.length>1?i("Dropdown",{attrs:{open:t.blogs_dropdown,anchor:t.$refs.blogs_switcher,width:"anchor",mode:"user"},on:{close:function(e){t.blogs_dropdown=!1}}},[t._l(t.blogs,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.id!==t.currentBlog.id,expression:"blog.id !== currentBlog.id"}],key:e.id,staticClass:"dropdown__item",on:{click:function(i){return t.$emit("blog",e.id)}}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Userpic",{attrs:{blog:e}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(e.name||"@"+e.uri))])])])})),t.account.can_create_blog?i("div",{staticClass:"dropdown__item",on:{click:function(e){return t.$emit("newblog")}}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Icon",{attrs:{name:"add"}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(t.$t("settings.new_blog")))])])]):t._e()],2):t._e()],1):t._e()]),i("div",{staticClass:"settingsSwitcher__group"},t._l(t.sections,(function(e){return i("div",{key:e,staticClass:"settingsSwitcher__section",class:{m_active:e===t.section},on:{click:function(i){return t.$emit("section",e)}}},[i("div",{staticClass:"settingsSwitcher__section_text"},[t._v(t._s(t.$t("settings.sections."+e)))]),i("div",{staticClass:"settingsSwitcher__section_icon"},[i("Icon",{attrs:{name:"settings_"+e}})],1)])})),0),i("div",{staticClass:"settingsSwitcher__group"},[i("a",{staticClass:"settingsSwitcher__link",attrs:{href:"//t.me/TeletypeSupportBot",target:"_blank"}},[t._v(t._s(t.$t("settings.links.support")))]),i("a",{staticClass:"settingsSwitcher__link",attrs:{href:"mailto:mailbox@teletype.in"}},[t._v(t._s(t.$t("settings.links.email")))]),i("a",{staticClass:"settingsSwitcher__link",attrs:{href:"https://twitter.com/TeletypeHQ",target:"_blank"}},[t._v(t._s(t.$t("settings.links.twitter")))]),i("a",{staticClass:"settingsSwitcher__link",attrs:{href:t.links.tos,target:"_blank"}},[t._v(t._s(t.$t("settings.links.tos")))]),i("a",{staticClass:"settingsSwitcher__link",attrs:{href:t.links.privacy,target:"_blank"}},[t._v(t._s(t.$t("settings.links.privacy")))]),t.profile.uri?i("div",{staticClass:"settingsSwitcher__link",on:{click:function(e){return t.$emit("logout")}}},[t._v(t._s(t.$t("settings.links.logout",t.profile)))]):t._e()])])};s._withStripped=!0;var n=i(202),o=(i(39),i(4)),r=i.n(o),a={components:{Userpic:n.a},props:["id","section","sections"],data:function(){return{blogs_dropdown:!1}},computed:{links:function(){return this.$store.state.config.app.links},account:function(){return this.$store.state.account},blogs:function(){return this.account.blogs},profile:function(){return this.$store.getters["account/profile"]},open:function(){return this.$store.state.blogs.settings.open},currentBlog:function(){return this.id?r()(this.account.blogs,{id:this.id}):null}}},c=(i(670),i(0)),l=Object(c.a)(a,s,[],!1,null,"2ae3b4ed",null);l.options.__file="src/components/settings/switcher.vue";e.a=l.exports},710:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.domain.title")))]),i("form",{staticClass:"settings__field_input m_rows",on:{submit:t.toggleDomain}},[i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{name:"domain",label:t.$t("settings.domain.placeholder"),value:t._f("toUnicode")(t.currentDomain),icon:t.blog.domain?t.blog.domain_https?"https":"http":null,max:100,readonly:!!t.blog.domain||!t.blog.admin,disabled:!1===t.currentDomain},on:{change:function(e){return t.domain=e}}})],1),i("div",{staticClass:"settings__col"},[t.blog.admin&&t.blog.domain?i("Button",{attrs:{text:t.$t("settings.domain.unmap"),loading:!!t.process.domain},on:{click:t.unmapDomain}}):t.blog.admin?i("Button",{attrs:{type:"filled",text:t.$t("settings.domain.map"),loading:!!t.process.domain,disabled:!t.valid.domain},on:{click:t.mapDomain}}):t._e()],1)]),i("transition",{attrs:{mode:"out-in","leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error?i("div",{key:"error",staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error)}}):!t.blog.domain&&t.savedDomain&&t.savedDomain.domain?i("div",{key:"not_mapped",staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.domain.text.not_mapped"))}}):t.blog.domain?t._e():i("div",{key:"no_domain",staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.domain.text.no_domain"))}})])],1),t.blog.domain?t._e():i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__tipnote"},[i("TipNote",{attrs:{icon:"lock",text:t.$t("settings.ga.not_accepted")}})],1)]),t._l(t.trackers,(function(e,s){return i("div",{key:s,staticClass:"settings__field",class:{m_disabled:!t.blog.domain}},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings."+s+".title")))]),i("form",{staticClass:"settings__field_input m_rows",on:{submit:function(e){return e.preventDefault(),t.toggleTracker(s)}}},[i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{name:"domain",label:t.$t("settings."+s+".placeholder"),value:t.blog[s+"_tracking_id"],max:15,disabled:!t.blog.domain,readonly:!!t.blog[s+"_tracking_id"]||!t.blog.admin},on:{change:function(e){return t.trackingId[s]=e}}})],1),i("div",{staticClass:"settings__col"},[t.blog[s+"_tracking_id"]&&t.blog.admin?i("Button",{attrs:{text:t.$t("settings."+s+".remove"),loading:t.process[s],disabled:!t.blog.domain},on:{click:function(e){return e.preventDefault(),t.unsetTracker(s)}}}):t.blog.admin?i("Button",{attrs:{type:"filled",text:t.$t("settings."+s+".add"),loading:t.process[s],disabled:!t.blog.domain||!t.valid[s]},on:{click:function(e){return e.preventDefault(),t.setTracker(s)}}}):t._e()],1)])])}))],2)]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)};s._withStripped=!0;var n=i(7),o=i(62),r=i(16),a=i(278),c=i(676),l=i.n(c),u=i(108),d=i.n(u),_={name:"settings-domain",components:{Preloader:n.a,Button:r.a,Input:o.a,TipNote:a.a},props:["id"],data:function(){return{savedDomain:null,domain:null,trackingId:{ga:null,ym:null},process:{domain:!1,ga:!1,ym:!1},error:null}},computed:{config:function(){return this.$store.state.config.app},blog:function(){return this.$store.getters["blogs/byId"][this.id]},currentDomain:function(){return!!this.savedDomain&&(this.savedDomain.domain?this.savedDomain.domain:this.blog.domain?this.blog.domain:null)},valid:function(){var t;return t=this.domain||this.currentDomain,{domain:this.isValidDomain(t)?t:null,ga:this.isValidGA(this.trackingId.ga)?this.trackingId.ga:null,ym:this.isValidYM(this.trackingId.ym)?this.trackingId.ym:null}},trackers:function(){return{ga:"googleanalytics",ym:"yandexmetrika"}}},filters:{toUnicode:function(t){return t?l.a.toUnicode(t):null}},methods:{fetchCurrentDomain:function(){var t;return t=this.id,this.$store.dispatch("blogs/checkDomain",{id:t}).then(t=>this.savedDomain=t,()=>this.errorAlert())},reset:function(){return this.fetchCurrentDomain(),this.domain=null,this.trackingId=d()(this.trackingId,(function(t){return null})),this.process=d()(this.process,(function(t){return null})),this.error=null},toggleDomain:function(t){return t.preventDefault(),this.valid.domain?this.mapDomain():this.unmapDomain()},mapDomain:function(){var t,e;if(this.valid.domain)return e=this.id,t=this.valid.domain,this.process.domain=!0,this.$store.dispatch("blogs/changeDomain",{id:e,domain:t}).then(t=>t.success?this.fetchCurrentDomain():this.error=this.$t("settings.domain.error_not_mapped")).catch(t=>(null!=t?t.error:void 0)&&this.i18n.t.settings.domain["error_"+t.error]?this.error=this.i18n.t.settings.domain["error_"+t.error]:this.error=this.$t("settings.domain.error")).then(()=>(this.blog.domain&&this.trackEvent(["settings","map_domain"]),this.process.domain=!1),()=>(this.errorAlert(),this.process.domain=!1))},unmapDomain:function(){var t;if(this.currentDomain)return t=this.id,null,this.process.domain=!0,this.$store.dispatch("confirms/add",{message:this.$t("confirms.domain"),type:"danger"}).then(()=>this.$store.dispatch("blogs/changeDomain",{id:t,domain:null}).then(()=>this.fetchCurrentDomain()),(function(){})).then(()=>(this.blog.domain||this.trackEvent(["settings","unmap_domain"]),this.process.domain=!1),()=>(this.errorAlert(),this.process.domain=!1))},toggleTracker:function(t){return this.valid[t]?this.setTracker(t):this.unsetTracker(t)},setTracker:function(t){var e,i;if(this.valid[t])return i=this.id,e={[t+"_tracking_id"]:this.valid[t]},this.process[t]=!0,this.$store.dispatch("blogs/edit",{id:i,fields:e}).then(()=>(this.trackEvent(["settings","add_"+this.trackers[t]]),this.trackingId[t]=null,this.process[t]=!1),()=>(this.errorAlert(),this.process[t]=!1))},unsetTracker:function(t){var e,i;if(this.blog[t+"_tracking_id"])return i=this.id,e={[t+"_tracking_id"]:null},this.process[t]=!0,this.$store.dispatch("confirms/add",{message:this.$t("confirms."+t),type:"delete"}).then(()=>this.$store.dispatch("blogs/edit",{id:i,fields:e}),(function(){})).then(()=>(this.trackEvent(["settings","remove_"+this.trackers[t]]),this.trackingId[t]=null,this.process[t]=!1),()=>(this.errorAlert(),this.process[t]=!1))},errorAlert:function(t){var e;return e=t&&this.i18n.t.settings.errors[t]?"settings.errors."+t:"settings.errors.other",this.$store.dispatch("alerts/add",{type:"error",locale:e})},isValidGA:function(t){return!!t&&/^([a-z]{2,3})-(\d+)-(\d+)$/i.test(t)},isValidYM:function(t){return!!t&&/^(\d{4,15})$/.test(t)},isValidDomain:function(t){var e;return!!t&&(e=l.a.toASCII(t),!!/^([a-z0-9-]+\.)+[a-z0-9-]{2,}$/i.test(e)&&!/^([A-z0-9-]+\.){0,}teletype\.([a-z]{2,})$/.test(e))}},mounted:function(){return this.fetchCurrentDomain()},watch:{id:{handler:"reset"}}},h=i(0),p=Object(h.a)(_,s,[],!1,null,null,null);p.options.__file="src/components/settings/domain.vue";e.a=p.exports},712:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,mode:"dark",height:"full",position:"right_top",menu:!0},on:{close:t.close}},[i("div",{staticClass:"notifications"},[i("Link",{staticClass:"notifications__button",attrs:{to:{name:"main",domain:null}},on:{click:t.close}},[i("div",{staticClass:"notifications__button_text"},[t._v(t._s(t.$t("popups.notifications.dashboard")))]),i("div",{staticClass:"notifications__button_icon"},[i("Icon",{attrs:{name:"dashboard"}})],1)]),i("div",{staticClass:"notifications__button",on:{click:t.clickSettings}},[i("div",{staticClass:"notifications__button_text"},[t._v(t._s(t.$t("popups.notifications.settings")))]),i("div",{staticClass:"notifications__button_icon"},[i("Icon",{attrs:{name:"settings"}})],1)]),!t.loading&&(t.activity.length>0||t.forYou.length>0)?i("div",{staticClass:"notifications__list"},[i("div",{staticClass:"notifications__list_sections"},[i("Tab",{attrs:{active:"forYou"===t.section,simple:!0},on:{click:function(e){t.section="forYou"}}},[i("span",[t._v(t._s(t.$t("popups.notifications.for_you")))]),t.newCounts.forYou>0?i("span",[t._v(" ("+t._s(t.newCounts.forYou)+")")]):t._e()]),i("Tab",{attrs:{active:"activity"===t.section,simple:!0},on:{click:function(e){t.section="activity"}}},[i("span",[t._v(t._s(t.$t("popups.notifications.activity")))]),t.newCounts.activity>0?i("span",[t._v(" ("+t._s(t.newCounts.activity)+")")]):t._e()])],1),t.notifications.length>0?i("div",{staticClass:"notifications__list_items"},t._l(t.notifications,(function(e){return i(t.notificationsViews[e.type],{key:e.notification_id,tag:"component",attrs:{id:e.notification_id,created:e.created_at,read:e.read,payload:e.payload}})})),1):i("div",{staticClass:"notifications__empty"},[t._v(t._s(t.$t("popups.notifications.empty")))])]):t.loading?i("div",{staticClass:"notifications__empty"},[i("Preloader",{attrs:{inline:!0}})],1):i("div",{staticClass:"notifications__empty"},[t._v(t._s(t.$t("popups.notifications.empty")))])],1)])};s._withStripped=!0;var n=i(7),o=i(45),r=i(207),a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.blog_teammate"),"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};a._withStripped=!0;var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.type,{tag:"component",staticClass:"notification",class:{m_read:t.read,m_clickable:!!t.link},attrs:{to:t.link}},[i("div",{staticClass:"notification__header"},[t.authorUserpic?i("span",{staticClass:"notification__header_userpic",style:t.authorUserpic}):!1===t.authorColor?i("span",{staticClass:"notification__header_userpic",class:["m_dummy"]}):t.authorColor?i("span",{staticClass:"notification__header_userpic",style:t.authorColor}):t._e(),i("span",{staticClass:"notification__header_name"},[t._v(t._s(t.authorName))]),t.dateString?i("span",{staticClass:"notification__header_date",domProps:{innerHTML:t._s(t.dateString)}}):t._e()]),i("div",{staticClass:"notification__content"},[t.image?i("img",{staticClass:"notification__content_image",attrs:{src:t.image}}):t.systemText?i("div",{staticClass:"notification__content_text m_system",domProps:{innerHTML:t._s(t.systemText)}}):t._e(),t.text||t.$slots.default?i("div",{staticClass:"notification__content_text"},[t._t("default",[t.text?i("div",{domProps:{innerHTML:t._s(t.text)}}):t._e()])],2):t._e(),t.subtext?i("div",{staticClass:"notification__content_text m_line"},[t._v(t._s(t.subtext))]):t._e()]),t.title?i("div",{staticClass:"notification__ref"},[i("div",{staticClass:"notification__ref_text"},[t._v(t._s(t._f("shortenedText")(t.title)))])]):t.subtitle?i("div",{staticClass:"notification__ref m_line"},[i("div",{staticClass:"notification__ref_text"},[t._v(t._s(t.subtitle))])]):t._e()])};c._withStripped=!0;var l=i(40),u=i(1),d=i(6),_=i.n(d),h=(i(37),i(205),{components:{Link:l.a},props:["link","read","date","image","text","subtext","systemText","title","subtitle","authorUserpic","authorColor","authorVerified","authorName"],computed:{type:function(){return this.link?"Link":"div"},dateString:function(){return this.date?_()(this.date).ttDate(this.$timer.moment,this.i18n.t.popups.notifications.date):null}},filters:{shortenedText:function(t){return Object(u.p)(t,120)}}}),p=(i(667),i(0)),m=Object(p.a)(h,c,[],!1,null,"55f5d87c",null);m.options.__file="src/components/notifications/notification.vue";var g=m.exports,f={components:{Notification:g},props:["id","created","read","payload"],computed:{user:function(){return this.payload.blog},link:function(){return this.user?{name:"blog",blog:this.user,params:{uri:this.user.uri}}:null},authorName:function(){var t,e,i,s;return(null!=(t=this.user)?t.name:void 0)?null!=(e=this.user)?e.name:void 0:(null!=(i=this.user)?i.uri:void 0)?"@"+(null!=(s=this.user)?s.uri:void 0):this.$t("popups.notifications.deleted_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.user)?t.userpic:void 0)&&(i=null!=(e=this.user)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.user)?e.id:void 0)||0)&&{"background-color":Object(u.r)(t)}},authorVerified:function(){var t;return null!=(t=this.user)?t.verified:void 0}}},v=Object(p.a)(f,a,[],!1,null,null,null);v.options.__file="src/components/notifications/blog_teammate.vue";var b=v.exports,C=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.blog_subscription.text",{blogName:t.blogName}),"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};C._withStripped=!0;var w={components:{Notification:g},props:["id","created","read","payload"],computed:{user:function(){return this.payload.user},blog:function(){return this.payload.blog},link:function(){return this.user?{name:"blog",blog:this.user,params:{uri:this.user.uri}}:null},authorName:function(){var t,e,i,s;return(null!=(t=this.user)?t.name:void 0)?null!=(e=this.user)?e.name:void 0:(null!=(i=this.user)?i.uri:void 0)?"@"+(null!=(s=this.user)?s.uri:void 0):this.$t("popups.notifications.deleted_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.user)?t.userpic:void 0)&&(i=null!=(e=this.user)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.user)?e.id:void 0)||0)&&{"background-color":Object(u.r)(t)}},authorVerified:function(){var t;return null!=(t=this.user)?t.verified:void 0},blogName:function(){var t,e,i,s;return(null!=(t=this.blog)?t.name:void 0)?null!=(e=this.blog)?e.name:void 0:(null!=(i=this.blog)?i.uri:void 0)?"@"+(null!=(s=this.blog)?s.uri:void 0):this.$t("popups.notifications.blog_subscription.you")}}},k=Object(p.a)(w,C,[],!1,null,null,null);k.options.__file="src/components/notifications/blog_subscription.vue";var $=k.exports,y=function(){var t=this.$createElement;return(this._self._c||t)("Notification",{attrs:{date:this.created,read:this.read,link:this.link,text:this.text,image:this.image,"author-name":this.title,"author-color":null}})};y._withStripped=!0;var x=i(204),P=i.n(x),I={components:{Notification:g},props:["id","created","read","payload"],computed:{serviceAd:function(){return this.payload.service_ad||{}},link:function(){return P()(this.serviceAd,`locales.${this.i18n.l}.link`)||P()(this.serviceAd,`locales.${this.i18n.d.lang}.link`)||null},title:function(){return P()(this.serviceAd,`locales.${this.i18n.l}.title`)||P()(this.serviceAd,`locales.${this.i18n.d.lang}.title`)||this.$t("popups.service_ads.categories."+this.serviceAd.category)},text:function(){return P()(this.serviceAd,`locales.${this.i18n.l}.text`)||P()(this.serviceAd,`locales.${this.i18n.d.lang}.text`)||null},image:function(){return P()(this.serviceAd,`locales.${this.i18n.l}.image`)||P()(this.serviceAd,`locales.${this.i18n.d.lang}.image`)||null}}},T=Object(p.a)(I,y,[],!1,null,null,null);T.options.__file="src/components/notifications/service_ad.vue";var S=T.exports,B=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,text:t.text,image:t.image,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};B._withStripped=!0;var D={components:{Notification:g},props:["id","created","read","payload"],computed:{message:function(){return this.payload.message||{}},link:function(){return this.message.link},text:function(){return this.message["text_"+this.i18n.l]?this.message["text_"+this.i18n.l]:this.message["text_"+this.i18n.d]?this.message["text_"+this.i18n.d]:this.message.text?this.message.text:this.message.message?this.message.message:this.$t("popups.notifications.deleted_message")},image:function(){return this.message.image},authorName:function(){var t,e,i,s;return this.message.author_name?this.message.author_name:(null!=(t=this.message.author)?t.name:void 0)?null!=(e=this.message.author)?e.name:void 0:(null!=(i=this.message.author)?i.uri:void 0)?"@"+(null!=(s=this.message.author)?s.uri:void 0):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,this.message.author_userpic&&(i=this.message.author_userpic),(null!=(t=this.message.author)?t.userpic:void 0)&&(i=null!=(e=this.message.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t;return!!(t=this.message.user_blog||0)&&{"background-color":Object(u.r)(t)}},authorVerified:function(){return!0}}},j=Object(p.a)(D,B,[],!1,null,null,null);j.options.__file="src/components/notifications/service_message.vue";var E=j.exports,L={extends:E},M=Object(p.a)(L,void 0,void 0,!1,null,null,null);M.options.__file="src/components/notifications/personal_message.vue";var O=M.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Notification",{attrs:{date:t.created,read:t.read,link:t.link,subtitle:t.subtitle,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}},[i("div",[t._v(t._s(t._f("shortenedText")(t.text)))])])};A._withStripped=!0;var V={components:{Notification:g},props:["id","created","read","payload"],computed:{comment:function(){return this.payload.comment},article:function(){return this.payload.article},author:function(){var t;return null!=(t=this.comment)?t.author:void 0},link:function(){return this.comment&&this.article&&this.article.author?{name:"article",blog:this.article.author,params:{uri:this.article.author.uri,article_uri:this.article.uri},hash:"#c_"+this.comment.comment_id}:null},text:function(){var t,e;return(null!=(e=this.comment)?e.text:void 0)?((t=document.createElement("DIV")).innerHTML=this.comment.text,t.innerText+""):this.$t("popups.notifications.deleted_comment")},subtitle:function(){var t,e;return(null!=(t=this.article)?t.sharing_title:void 0)?this.article.sharing_title:(null!=(e=this.article)?e.title:void 0)?this.article.title:null},authorName:function(){var t,e,i,s;return(null!=(t=this.author)?t.name:void 0)?null!=(e=this.author)?e.name:void 0:(null!=(i=this.author)?i.uri:void 0)?"@"+(null!=(s=this.author)?s.uri:void 0):this.comment?this.$t("popups.notifications.deleted_user"):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.author)?t.userpic:void 0)&&(i=null!=(e=this.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.author)?e.id:void 0)||0)&&{"background-color":Object(u.r)(t)}},authorVerified:function(){var t;return(null!=(t=this.author)?t.verified:void 0)||!1}},filters:{shortenedText:function(t){return Object(u.p)(t,120)}}},N=Object(p.a)(V,A,[],!1,null,null,null);N.options.__file="src/components/notifications/article_comment.vue";var U=N.exports,F={extends:U},q=Object(p.a)(F,void 0,void 0,!1,null,null,null);q.options.__file="src/components/notifications/comment_reply.vue";var H=q.exports,z=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.comment_like.text"),subtext:t.text,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};z._withStripped=!0;var R={extends:U,computed:{author:function(){return this.payload.user},text:function(){var t,e;return(null!=(e=this.comment)?e.text:void 0)?((t=document.createElement("DIV")).innerHTML=this.comment.text,t.innerText+""):this.$t("popups.notifications.deleted_comment")}}},Y=Object(p.a)(R,z,[],!1,null,null,null);Y.options.__file="src/components/notifications/comment_like.vue";var K=Y.exports,G=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.article_reaction.text",{reaction:t.reaction}),subtitle:t.title,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};G._withStripped=!0;var J=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,image:t.image,title:t.title,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})};J._withStripped=!0;var Q={components:{Notification:g},props:["id","created","read","payload"],computed:{article:function(){return this.payload.article},author:function(){var t;return null!=(t=this.article)?t.author:void 0},link:function(){return this.article&&this.author?{name:"article",blog:this.article.author,params:{uri:this.author.uri,article_uri:this.article.uri}}:null},title:function(){var t,e;return(null!=(t=this.article)?t.sharing_title:void 0)?this.article.sharing_title:(null!=(e=this.article)?e.title:void 0)?this.article.title:this.$t("popups.notifications.deleted_article")},image:function(){return this.article&&this.article.sharing_image?"image"!==this.article.sharing_type?null:this.article.sharing_image:null},authorName:function(){var t,e,i;return(null!=(t=this.author)?t.name:void 0)?this.author.name:(null!=(e=this.author)?e.uri:void 0)?"@"+(null!=(i=this.author)?i.uri:void 0):this.article?this.$t("popups.notifications.deleted_user"):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.author)?t.userpic:void 0)&&(i=null!=(e=this.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.author)?e.id:void 0)||0)&&{"background-color":valueToHSLString(t)}},authorVerified:function(){var t;return(null!=(t=this.author)?t.verified:void 0)||!1}}},W=Object(p.a)(Q,J,[],!1,null,null,null);W.options.__file="src/components/notifications/article.vue";var Z=W.exports,X={extends:Z,computed:{author:function(){return this.payload.user},reaction:function(){return this.payload.reaction}}},tt=Object(p.a)(X,G,[],!1,null,null,null);tt.options.__file="src/components/notifications/article_reaction.vue";var et=tt.exports,it=i(4),st=i.n(it),nt=[].splice,ot={components:{Preloader:n.a,Icon:o.a,Tab:r.a,BlogTeammateView:b,BlogSubscriptionView:$,ServiceAdView:S,ServiceMessageView:E,PersonalMessageView:O,CommentReplyView:H,CommentLikeView:K,ArticleCommentView:U,ArticleReactionView:et,ArticleView:Z},props:["show"],data:function(){return{loading:!0,section:"forYou"}},computed:{account:function(){return this.$store.state.account},activity:function(){return this.$store.getters["notifications/activity"]},forYou:function(){return this.$store.getters["notifications/forYou"]},newCounts:function(){return this.$store.getters["notifications/newCounts"]},notifications:function(){return"forYou"===this.section?this.forYou:"activity"===this.section?this.activity:[]},notificationsViews:function(){return{blog_teammate:"BlogTeammateView",blog_subscription:"BlogSubscriptionView",service_ad:"ServiceAdView",service_message:"ServiceMessageView",personal_message:"PersonalMessageView",comment_reply:"CommentReplyView",comment_like:"CommentLikeView",article_comment:"ArticleCommentView",article_reaction:"ArticleReactionView",article:"ArticleView"}}},methods:{fetch:function(){if(this.show)return this.loading=!0,this.$store.dispatch("notifications/load").then(()=>(this.$store.dispatch("notifications/read"),this.loading=!1),()=>this.loading=!1)},clickSettings:function(){var t,e,i;return i=this.$route.params.uri,(t=st()(this.account.blogs,{uri:i}))||(e=this.$store.state.domain,t=st()(this.account.blogs,{domain:e})),this.$store.dispatch("blogs/openSettings",{blog_id:t?t.id:null}),this.close()},close:function(){if(this.show)return this.$store.commit("notifications/setOpen",!1)}},watch:{show:{handler:"fetch"}},mounted:function(){return this.unbindRouterHook=this.$router.beforeEach((...t)=>{var e,i;return i=t,[...t]=i,[e]=nt.call(t,-1),this.close(),e()})},beforeDestroy:function(){return"function"==typeof this.unbindRouterHook?this.unbindRouterHook():void 0}},rt=(i(668),Object(p.a)(ot,s,[],!1,null,"43a3e4e8",null));rt.options.__file="src/components/Notifications.vue";e.default=rt.exports},713:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alerts js_scroll_fix"},[i("transition-group",{staticClass:"alerts__content",attrs:{tag:"div","leave-to-class":"m_hidden m_exit","enter-class":"m_hidden"}},t._l(t.alerts,(function(e){return i(t._f("alertComponent")(e.view),t._b({key:e.id,tag:"component"},"component",e,!1))})),1)],1)};s._withStripped=!0;var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alert",class:["m_"+t.type,!!t.onClick&&"m_clickable"],on:{click:t.click,mouseover:t.over,mouseleave:t.leave}},[t._t("default",[t.locale?i("div",{staticClass:"alert__text",domProps:{innerHTML:t._s(t.$t(t.locale||"title"))}}):i("div",{staticClass:"alert__text",domProps:{innerHTML:t._s(t.text)}})])],2)};n._withStripped=!0;var o=i(33),r=i.n(o),a={props:["id","type","onClick","text","locale"],methods:{click:function(){if(this.onClick)return"close"===this.onClick?this.$store.dispatch("alerts/resolve",this.id):r()(this.onClick)?this.onClick():void 0},over:function(){return this.$store.dispatch("alerts/stopTimeout",this.id)},leave:function(){return this.$store.dispatch("alerts/setTimeout",this.id)}},mounted:function(){return this.$store.dispatch("alerts/setTimeout",this.id)}},c=(i(686),i(0)),l=Object(c.a)(a,n,[],!1,null,"9a79c78e",null);l.options.__file="src/components/alerts/Default.vue";var u={components:{Default:l.exports},computed:{alerts:function(){return this.$store.getters["alerts/queue"]||[]}},filters:{alertComponent:function(t){return t||"Default"}}},d=(i(687),Object(c.a)(u,s,[],!1,null,"403a99cf",null));d.options.__file="src/components/alerts/Alerts.vue";e.default=d.exports},714:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this.$createElement,e=this._self._c||t;return e("Modal",{attrs:{show:this.show,mode:"dark",width:"small"},on:{close:this.close}},[e("div",{staticClass:"simpleLogin"},[e("div",{staticClass:"simpleLogin__caption"},[e("div",{staticClass:"simpleLogin__caption_title"},[this._v(this._s(this.$t("login.register.title")))])]),e("div",{staticClass:"simpleLogin__form"},[e("Login",{attrs:{name:"login_popup",type:"login",simple:!0}})],1)])])};s._withStripped=!0;var n={components:{Login:i(279).a},computed:{promise:function(){return this.$store.state.auth.popup||null},show:function(){return!!this.$store.getters["auth/popup"]}},methods:{close:function(){var t;return null!=(t=this.promise)?t.reject():void 0}}},o=(i(684),i(0)),r=Object(o.a)(n,s,[],!1,null,"21b70757",null);r.options.__file="src/components/SimpleLogin.vue";e.default=r.exports},715:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,mode:"dark",width:"form"},on:{close:t.close}},[t.ad?i("div",{staticClass:"serviceAds"},[i("div",{staticClass:"serviceAds__header"},[i("div",{staticClass:"serviceAds__header_title"},[t.$t("popups.service_ads.categories."+t.ad.category)?i("span",[t._v(t._s(t.$t("popups.service_ads.categories."+t.ad.category)))]):i("span",[t._v(t._s(t._f("startCase")(t.ad.category)))]),t.length>1?i("span",[t._v(" "+t._s(t.index+1)+"/"+t._s(t.length))]):t._e()]),i("div",{staticClass:"serviceAds__header_close",on:{click:t.close}},[i("IconButton",{attrs:{icon:"close"}})],1)]),t.data.image&&t.data.link?i("Link",{staticClass:"serviceAds__art",attrs:{to:t.data.link,newTab:!0}},[i("img",{staticClass:"serviceAds__art_image",attrs:{src:t.data.image,width:t.data.image_width,height:t.data.image_height}})]):t.data.image?i("div",{staticClass:"serviceAds__art"},[i("img",{staticClass:"serviceAds__art_image",attrs:{src:t.data.image,width:t.data.image_width,height:t.data.image_height}})]):t._e(),i("div",{staticClass:"serviceAds__content"},[i("div",{staticClass:"serviceAds__content_title"},[t.data.title&&t.data.link?i("Link",{attrs:{to:t.data.link,newTab:!0}},[t._v(t._s(t.data.title))]):i("span",[t._v(t._s(t.data.title))])],1),t.data.text?i("div",{staticClass:"serviceAds__content_text text",domProps:{innerHTML:t._s(t.data.text)}}):t._e()]),i("div",{staticClass:"serviceAds__footer"},[i("div",{staticClass:"serviceAds__footer_item"},[t.data.link?i("Button",{attrs:{type:"filled",link:t.data.link,newTab:!0,text:t.data.button||t.$t("popups.service_ads.button")}}):i("Button",{attrs:{type:"filled",text:t.data.button||t.$t("popups.service_ads.close")},on:{click:t.close}})],1),t.next?i("div",{staticClass:"serviceAds__footer_item"},[i("Button",{attrs:{text:t.$t("popups.service_ads.next")},on:{click:t.showNext}})],1):t._e()])],1):t._e()])};s._withStripped=!0;var n=i(201),o=i(12),r=i(40),a=i(16),c=i(204),l=i.n(c),u=i(39),d=i.n(u),_=i(4),h=i.n(_),p=i(2),m=i.n(p),g=i(68),f=i.n(g),v=i(13),b=i.n(v),C=i(275),w=i.n(C),k={components:{Modal:n.a,IconButton:o.a,Link:r.a,Button:a.a},data:function(){return{current:null}},computed:{items:function(){return this.$store.getters["service_ads/items"]},length:function(){return this.items.length},ad:function(){return h()(this.items,{id:this.current})},index:function(){return f()(this.items,{id:this.current})},show:function(){return!!this.ad},prev:function(){return d()(this.items.slice(0,this.index))},next:function(){return d()(this.items.slice(this.index+1))},data:function(){var t,e,i,s;return this.ad?(t=this.ad,e=this.i18n.l,s=this.i18n.d.lang,i={title:null,text:null,link:null,button:null},m()(i,(function(n,o){if(i[o]=l()(t,`locales.${e}.${o}`),!i[o])return i[o]=l()(t,`locales.${s}.${o}`)})),l()(t,`locales.${e}.image`)?(i.image=l()(t,`locales.${e}.image`),i.image_width=l()(t,`locales.${e}.image_width`),i.image_height=l()(t,`locales.${e}.image_height`)):l()(t,`locales.${s}.image`)&&(i.image=l()(t,`locales.${s}.image`),i.image_width=l()(t,`locales.${s}.image_width`),i.image_height=l()(t,`locales.${s}.image_height`)),i):null}},filters:{startCase:function(t){return w()(t)}},watch:{items:{handler:function(){return b()(this.items)?this.current=null:this.current=d()(this.items).id},immediate:!0},show:{handler:function(){if(this.show)return this.read()},immediate:!0}},methods:{showNext:function(){var t;return this.current=null!=(t=this.next)?t.id:void 0},showPrev:function(){var t;return this.current=null!=(t=this.prev)?t.id:void 0},read:function(){if(this.current)return this.$store.dispatch("service_ads/readAll",this.current)},close:function(){return this.$store.commit("service_ads/clear")}}},$=(i(688),i(0)),y=Object($.a)(k,s,[],!1,null,"0ff0f32a",null);y.options.__file="src/components/ServiceAds.vue";e.default=y.exports},716:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.confirmation?i("Popup",{attrs:{show:t.show,close:!1,icon:t.confirmation.icon,blog:t.confirmation.blog,title:t.confirmation.message,text:t.confirmation.text},on:{close:t.dismiss,show:t.onShowChange},scopedSlots:t._u([{key:"actions",fn:function(){return[i("Button",{on:{click:function(e){return e.stopPropagation(),t.dismiss(e)}}},[t._v(t._s(t.$t("confirms.buttons.dismiss")))]),i("Button",{attrs:{color:t.buttonColor},on:{click:function(e){return e.stopPropagation(),t.confirm(e)}}},[t._v(t._s(t.buttonText))])]},proxy:!0}],null,!1,3295569092)}):t._e()};s._withStripped=!0;var n=i(277),o=i(16),r={components:{Popup:n.a,Button:o.a},data:function(){return{eventsHandled:!1}},computed:{confirmation:function(){return this.$store.getters["confirms/current"]},show:function(){return!!this.confirmation},buttonColor:function(){var t;switch(null!=(t=this.confirmation)?t.type:void 0){case"delete":case"danger":case"remove":case"leave":case"unfollow":return"alarm";case"accept":return"active";default:return null}},buttonText:function(){var t,e;return(null!=(t=this.confirmation)?t.button_text:void 0)?this.confirmation.button_text:(e=function(){var t;switch(null!=(t=this.confirmation)?t.type:void 0){case"delete":return"delete";case"unfollow":return"unfollow";case"leave":return"leave";default:return"accept"}}.call(this),this.$t("confirms.buttons."+e))}},methods:{confirm:function(){if(this.confirmation)return this.$store.dispatch("confirms/confirm",this.confirmation.id)},dismiss:function(){if(this.confirmation)return this.$store.dispatch("confirms/dismiss",this.confirmation.id)},handleEnter:function(t){if(this.show&&13===t.keyCode)return t.preventDefault(),t.stopPropagation(),this.confirm()},onShowChange:function(t){if(t){if(this.eventsHandled)return;return document.addEventListener("keydown",this.handleEnter),this.eventsHandled=!0}return document.removeEventListener("keydown",this.handleEnter),this.eventsHandled=!1}}},a=i(0),c=Object(a.a)(r,s,[],!1,null,null,null);c.options.__file="src/components/Confirm.vue";e.default=c.exports},717:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"},on:{enter:t.place,"before-enter":t.onBeforeShow,"after-enter":t.onShow,"after-leave":t.onHide}},[t.open?i("div",{staticClass:"emojiPicker",class:t.classess,style:t.style,on:{click:t.clickBackdrop}},[i("div",{staticClass:"emojiPicker__backdrop",on:{click:t.close}}),i("div",{ref:"content",staticClass:"emojiPicker__content",class:{m_focused:t.focused,m_scrolled:t.scrolled,m_touching:t.touch.state},style:{"margin-top":t.touch.state?65+t.touch.delta+"px":null}},[i("div",{directives:[{name:"touch",rawName:"v-touch:swipe.down",value:t.close,expression:"close",arg:"swipe",modifiers:{down:!0}},{name:"touch",rawName:"v-touch:move.down",value:t.onTouchMove,expression:"onTouchMove",arg:"move",modifiers:{down:!0}},{name:"touch",rawName:"v-touch",value:t.onTouch,expression:"onTouch"}],staticClass:"emojiPicker__header"},[i("div",{staticClass:"emojiPicker__header_title",class:{m_hidden:t.scrolled}},[t._v("Add Your Reaction")]),i("div",{staticClass:"emojiPicker__header_scrolltitle",class:{m_hidden:!t.scrolled}},[t._v("Add Your Reaction")])]),i("div",{ref:"wrap",staticClass:"emojiPicker__wrap",on:{"&scroll":function(e){return t.onScroll(e)}}},[i("div",{staticClass:"emojiPicker__search",class:{m_focused:t.focused}},[i("div",{staticClass:"emojiPicker__search_icon"},[i("Icon",{attrs:{name:"search_small"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"emojiPicker__search_input",attrs:{type:"text",name:"search",placeholder:t.$t("emojis.search")},domProps:{value:t.query},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t.loading?i("div",{staticClass:"emojiPicker__loading"},[i("Preloader",{attrs:{central:!0}})],1):i("div",{staticClass:"emojiPicker__list"},t._l(t.list,(function(e){return i("div",{key:e.group||"default",staticClass:"emojiPicker__group"},[e.group?i("div",{staticClass:"emojiPicker__group_name"},[t._v(t._s(t.$t("emojis."+e.group)))]):t._e(),i("div",{staticClass:"emojiPicker__group_items"},t._l(e.items,(function(e){return i("div",{key:e.emoji,staticClass:"emojiPicker__group_item"},[i("div",{staticClass:"emojiPicker__group_emoji",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.input(e.emoji)}}},[i("div",{staticClass:"emojiPicker__group_glyph",style:t.$options.filters.emoji(e),attrs:{"data-glyph":e.emoji}})])])})),0)])})),0)])])]):t._e()])};s._withStripped=!0;var n,o=i(89),r=i(7),a=i(1),c=i(274);n=0;var l={extends:o.a,components:{Preloader:r.a},data:function(){return{query:"",touch:{state:!1,delta:0},top:0,scrolled:!1,focused:!1}},computed:{list:function(){return this.$store.getters["emojis/list"]},loading:function(){return this.$store.state.emojis.loading},isMobile:function(){var t;return null!=(t=this.$dom)?t.screens.mobile:void 0}},filters:{emoji:function(t){return Object(c.a)(t.position)}},watch:{query:function(){return this.search()},open:function(){if(this.open)return this.query=""},isMobile:function(){return this.isMobile?this.disableDocument():this.enableDocument()}},mounted:function(){return this.fetch()},methods:{fetch:function(){return this.$store.dispatch("emojis/fetch")},search:function(){return this.$store.dispatch("emojis/search",this.query)},input:function(t){return this.$emit("input",t)},close:function(){return this.$emit("close")},onScroll:function(){var t;return this.scrolled=(null!=(t=this.$refs.wrap)?t.scrollTop:void 0)>0},onTouch:function(t){return this.touch.state="end"!==t},onTouchMove:function(t){return this.touch.delta=t},onBeforeShow:function(){return this.disableDocument()},onShow:function(){return this.$emit("open",!0)},onHide:function(){return this.$emit("open",!1),this.focused=!1,this.scrolled=!1,this.enableDocument()},disableDocument:function(){var t,e,i;if(this.open&&this.isMobile&&!(t=document.body).classList.contains("m_fixed"))return i=Object(a.h)(),n=document.scrollingElement.scrollTop,t.classList.add("m_fixed"),null!=(e=this.$store)?e.commit("scrollFix",i):void 0},enableDocument:function(){var t,e,i;if((t=document.body).classList.contains("m_fixed"))return t.classList.remove("m_fixed"),t.style.top="",null!=(i=this.$store)&&i.commit("scrollFix",0),0===(e=document.scrollingElement.scrollTop)||n===e?document.scrollingElement.scrollTop=n:void 0}}},u=(i(689),i(0)),d=Object(u.a)(l,s,[],!1,null,"5f868c74",null);d.options.__file="src/components/EmojiPicker.vue";e.default=d.exports},718:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.open,mode:"dark",width:"max",height:"full",fullscreen:"tablet",position:"center"},on:{close:t.close}},[i("div",{staticClass:"settings"},[i("div",{staticClass:"settings__aside"},[i("div",{staticClass:"settings__aside_group"},[t.currentBlog?i("div",{ref:"blogs_switcher",staticClass:"settings__action",class:{m_dropdown:t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog},on:{click:function(e){t.blogs_dropdown=!t.blogs_dropdown}}},[i("div",{staticClass:"settings__action_icon"},[i("Userpic",{attrs:{blog:t.currentBlog}})],1),i("div",{ref:"blogs_switcher_text",staticClass:"settings__action_content"},[t.currentBlog.id===t.account.id?i("span",{staticClass:"settings__action_text"},[t._v(t._s(t.$t("settings.personal_blog")))]):i("span",{staticClass:"settings__action_text"},[t._v(t._s(t.currentBlog.name||"@"+t.currentBlog.uri))]),t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog?i("div",{staticClass:"settings__action_dropdown",class:{m_open:t.blogs_dropdown}}):t._e()]),t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog?i("Dropdown",{attrs:{open:t.blogs_dropdown,anchor:t.$refs.blogs_switcher_text,caption:t.$t("settings.switch_blog"),width:"normal",mode:"user"},on:{close:function(e){t.blogs_dropdown=!1}}},[t._l(t.blogs,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.id!==t.currentBlog.id,expression:"blog.id !== currentBlog.id"}],key:e.id,staticClass:"dropdown__item",on:{click:function(i){return t.switchBlog(e.id)}}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Userpic",{attrs:{blog:e}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(t._f("blogName")(e)))])])])})),t.account.can_create_blog?i("div",{staticClass:"dropdown__item",on:{click:t.openNewBlog}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Icon",{attrs:{name:"add"}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(t.$t("settings.new_blog")))])])]):t._e()],2):t._e()],1):t._e()]),i("div",{staticClass:"settings__aside_group"},t._l(t.sections,(function(e){return i("div",{key:e,staticClass:"settings__section",class:{m_active:e===t.section},on:{click:function(i){return t.changeSection(e)}}},[i("div",{staticClass:"settings__section_icon"},[i("Icon",{attrs:{name:"settings_"+e}})],1),i("div",{staticClass:"settings__section_text"},[t._v(t._s(t.$t("settings.sections."+e)))])])})),0),i("div",{staticClass:"settings__aside_group"},[i("a",{staticClass:"settings__link",attrs:{href:"//t.me/TeletypeSupportBot",target:"_blank"},on:{click:function(e){return t.trackClick("support")}}},[t._v(t._s(t.$t("settings.links.support")))]),i("a",{staticClass:"settings__link",attrs:{href:"mailto:mailbox@teletype.in"},on:{click:function(e){return t.trackClick("emailus")}}},[t._v(t._s(t.$t("settings.links.email")))]),i("a",{staticClass:"settings__link",attrs:{href:"https://twitter.com/TeletypeHQ",target:"_blank"},on:{click:function(e){return t.trackClick("twitter")}}},[t._v(t._s(t.$t("settings.links.twitter")))]),i("a",{staticClass:"settings__link",attrs:{href:t.links.tos,target:"_blank"},on:{click:function(e){return t.trackClick("policy")}}},[t._v(t._s(t.$t("settings.links.tos")))]),i("a",{staticClass:"settings__link",attrs:{href:t.links.privacy,target:"_blank"},on:{click:function(e){return t.trackClick("terms")}}},[t._v(t._s(t.$t("settings.links.privacy")))]),t.profile.uri?i("div",{staticClass:"settings__link",on:{click:t.logout}},[t._v(t._s(t.$t("settings.links.logout",t.profile)))]):t._e()])]),i("div",{staticClass:"settings__content"},[i("SettingsMenu",{attrs:{current:t.currentBlog,section:t.section,open:t.switcher},on:{toggle:function(e){t.switcher=!t.switcher},close:t.close}}),t.switcher?i("div",{staticClass:"settings__content_wrap m_tablet_visible"},[i("SettingsSwitcher",{attrs:{id:t.blogID,section:t.section,sections:t.sections},on:{blog:t.switchBlog,newblog:t.openNewBlog,section:t.changeSection,logout:t.logout}})],1):t._e(),i("div",{staticClass:"settings__content_wrap",class:{m_tablet_hidden:t.switcher}},[i("settings-"+t.section,{tag:"component",attrs:{id:t.blogID},on:{blog:function(e){return t.switchBlog(e)}}})],1)],1)])])};s._withStripped=!0;var n=i(619).a,o=(i(683),i(0)),r=Object(o.a)(n,s,[],!1,null,null,null);r.options.__file="src/components/settings/index.vue";e.default=r.exports},719:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,mode:"dark",width:"form"},on:{close:t.close}},[i("form",{staticClass:"newBlog",on:{submit:t.submit}},[i("button",{staticClass:"newBlog__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"newBlog__caption"},[i("div",{staticClass:"newBlog__caption_title"},[t._v(t._s(t.$t("popups.new_blog.title")))]),i("div",{staticClass:"newBlog__caption_close"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)]),i("div",{staticClass:"newBlog__form"},[i("div",{staticClass:"newBlog__field"},[i("Input",{ref:"uri",attrs:{name:"uri",label:t.$t("settings.uri.placeholder"),prefix:t.serviceLink,max:30},on:{change:function(e){return t.uri=e}}}),t.error?i("div",{staticClass:"newBlog__error",domProps:{innerHTML:t._s(t.error)}}):t._e()],1)]),i("div",{staticClass:"newBlog__footer"},[i("Button",{attrs:{type:"filled",text:t.$t("popups.new_blog.done"),loading:t.loading,disabled:!t.loading&&!t.isValid},on:{click:t.submit}})],1)])])};s._withStripped=!0;var n=i(646).a,o=(i(685),i(0)),r=Object(o.a)(n,s,[],!1,null,"8d51a33c",null);r.options.__file="src/components/NewBlog.vue";e.default=r.exports}}]);